{"version":3,"sources":["clients/vite.client.ts","util/task.ts","common/constants.ts","util/types.ts","util/logger.ts","util/file.util.ts","bg2.svg","util/coin.util.ts","clients/coingecko.client.ts","clients/vitex.client.ts","util/ensure.ts","util/moment.util.ts","datasources/base.datasource.ts","datasources/mock.datasource.ts","util/cache.ts","common/network.ts","datasources/vite.datasource.ts","contexts/common.ts","mutations/pool.ts","queries/account.ts","queries/network.ts","queries/token.ts","queries/pool.ts","clients/apollo.client.ts","features/common/components/tooltip/component.tsx","features/layout/components/footer/component.tsx","features/layout/components/header-loading/component.tsx","features/layout/components/main-scroll/component.tsx","features/layout/components/main-wrapper/component.tsx","contexts/web3.tsx","contexts/connectedWeb3.tsx","features/main/components/loading/component.tsx","util/format.util.ts","util/snackbar.util.ts","features/main/components/qrcode/component.tsx","features/main/components/login/component.tsx","features/main/components/network-list/component.tsx","features/layout/components/header/component.tsx","features/common/components/alert/component.tsx","features/pool/components/filter/component.tsx","factories/moment.factory.ts","util/filter.util.ts","services/pool.service.ts","util/vite.util.ts","features/common/components/click-once-button/component.tsx","features/pool/components/countdown/component.tsx","features/pool/components/dialog-deposit/component.tsx","services/account.service.ts","features/pool/components/dialog-withdraw/component.tsx","features/pool/components/dialog/component.tsx","features/pool/components/rewards/component.tsx","features/pool/components/netrewards/component.tsx","features/pool/components/tokens/component.tsx","features/pool/components/list-item/component.tsx","features/pool/components/list/component.tsx","features/pool/components/hero/component.tsx","features/pool/components/main/component.tsx","features/main/components/dialog-transaction/component.tsx","features/main/components/network/component.tsx","features/main/components/dialog-warning/component.tsx","features/main/components/main/component.tsx","App.tsx","reportWebVitals.ts","theme.tsx","index.tsx","util/common.util.ts","util/emitter.util.ts","wallet/types.ts","wallet/connector.ts","wallet/factory.ts","wallet/store.ts","wallet/manager.ts"],"names":["WS_RPC","require","logger","getLogger","providerOptions","retryTimes","retryInterval","ViteClient","_isConnected","_connector","_provider","_client","_emitter","_walletManager","_connectorFactory","initAsync","network","a","Promise","resolve","reject","create","rpcUrl","isResolved","on","err","error","ViteAPI","info","path","this","getEmitter","getWalletManager","WalletConnectorFactory","disconnect","method","args","request","account","methodName","abi","params","tokenId","amount","toAddress","block","accountBlock","createAccountBlock","address","WebWalletAccount","setProvider","setPrivateKey","privateKey","autoSetPreviousAccountBlock","sign","send","result","SessionWalletAccount","connector","emitConfirmTransactionDialog","sendTransactionAsync","Error","contractAddress","offchaincode","data","abiutils","encodeFunctionCall","dataBase64","Buffer","from","toString","requestAsync","selfAddr","offChainCode","resultBytes","outputs","i","length","push","type","offchainDecodeResult","decodeParameters","resultList","name","value","vmLog","topics","j","abiItem","encodeLogSignature","topic","decodeLog","inputs","utils","_Buffer","slice","event","payload","addressHeightRange","placeholder","fromHeight","toHeight","tempPayload","JSON","stringify","replace","subscribe","parse","unsubscribe","height","undefined","Task","blockByHeight","receiveBlockHash","blockByHash","getAccountBlockStatus","start","status","resolveAccountBlockData","statusTxt","blockType","bytes","client","getViteClient","task","interval","_taskTimer","_taskInterval","_task","_callback","setTimeout","_onStop","_run","callback","window","clearTimeout","CommonConstants","APP_NAME","WEB_WALLET_STORAGE_SPACE","SESSION_WALLET_STORAGE_SPACE","POOLS_CONTRACT_ADDRESS_v04","POOLS_CONTRACT_ADDRESS_v03","POOLS_CONTRACT_ADDRESS_v02","POOLS_CONTRACT_ADDRESS_v01","POOLS_CONTRACT_ADDRESS_TESTNET","VITE_TOKEN_ID","REWARD_FACTOR","Networks","id","networkId","connectorUrl","TypeNames","Pool","PoolUserInfo","Token","UnknownToken","__typename","symbol","originalSymbol","decimals","iconUrl","url","CustomDefinedTokens","Map","PoolSortTypes","DefaultPoolFilterValues","stakedOnly","showLive","sortBy","PoolSortType","DEFAULT","search","PoolDialogType","GlobalEvent","VmLogEvent","LogEventModel","init","banner","Object","assign","noop","ExtendedConsoleLogger","Boolean","process","Date","toLocaleTimeString","mapFn","e","CommonUtil","isString","message","toJsonString","timestamp","map","Array","isArray","e1","isEnabled","createLogEventModel","Function","prototype","bind","call","console","debug","warn","FileUtilType","util","_iconUrlMap","_coinMarketCapMap","_coingeckoMap","existing","get","toLowerCase","getCoinUtil","CoingeckoClient","_coinUtil","CoinGecko","mappedName","mapCoingeckoName","ids","simple","price","usdprice","usd","BigNumber","VitexClient","_baseUrl_v1","_baseUrl_v2","axios","getTokenPriceAsync","usdRate","Ensure","property","propertyName","trim","maxLength","MomentUtil","locale","_locale","navigator","language","moment","seconds","duration","date","unix","utc","local","getLocal","format","getLocalTime","getLocalDate","BaseDataSource","_coingeckoClient","_vitexClient","_tokens","_moment","initAsyncProtected","clear","disposeProtected","getActiveAccount","notNull","pool","endTimestamp","isExpired","latestRewardBlock","endBlock","decimalFactor","pow","stakingToken","rewardToken","getTokenPriceUSDAsync","stakingTokenPrice","rewardTokenPrice","totalTime","minus","startBlock","secondsInYear","toPercent","apr","times","totalRewards","dividedBy","totalStaked","isFinite","isNaN","token","toNumber","Number","lte","getNetworkBlockHeightAsync","networkBlockHeight","remainingSeconds","add","customToken","getTokenDetailAsync","tokenDecimals","urlIcon","links","website","set","unknownToken","p","getTokenAsync","stakingTokenId","rewardTokenId","getEndTimestampAsync","totalStakingBalance","totalRewardBalance","rewardPerPeriod","rewardPerToken","paidOut","fetchTimestamp","u","poolId","stakingBalance","rewardDebt","FileUtil","BrowserFileUtil","fetch","response","text","MockDataSource","fileUtil","_fileUtil","_pools","_users","_networkBlockHeight","_networkBlockHeightInterval","setInterval","plus","readFileAsync","pools","index","toPoolAsync","getAprAsync","users","toPoolUserInfoAsync","initNetworkBlockHeight","initPoolsAsync","initPoolUsersAsync","clearInterval","_account","_id","timeout","random","getPoolUserInfoAsync","userInfo","getPoolAsync","_poolId","isNullOrWhitespace","find","blockNumber","latestBlock","eq","period","latestReward","div","_tokenId","_amount","_updatePoolAsync","getAccount","gt","pendingAmount","emitPoolDeposit","emitPoolWithdraw","ds","getMockDataSource","CachedFunctionCall","callbackFn","_duration","_callbackFn","_currentValue","_lastExecution","getTime","manager","_networkHeight","_network","_setNetworkCallback","cb","split","filter","includes","getNetworkManager","ViteDataSource","_offchainMethods","_cachedNetworkBlockHeight","_contract","_listener","handleResponseAsync","waitForAccountBlockAsync","then","objectFromEntries","entries","fromEntries","entry","networkManager","currentNetwork","getNetwork","contract","contractName","createAddressListenerAsync","results","decodeVmLog","vmlog","handleVmLogAsync","removeAddressListener","removeListener","balanceInfoMap","balance","getAsync","callOffChainMethodAsync","getOffchainMethodAbi","offChain","getTotalPoolsAsync","callContractAsync","has","Deposit","addr","pid","Withdraw","CommonContext","_vite","_datasource","initViteClientAsync","dispose","context","getCommonContext","DEPOSIT_MUTATION","gql","WITHDRAW_MUTATION","PoolMutations","deposit","parent","datasource","depositAsync","withdraw","withdrawAsync","GET_ACCOUNT_BALANCE_QUERY","AccountQueries","accountBalance","getAccountBalanceAsync","GET_NETWORK_BLOCK_HEIGHT_QUERY","NetworkQueries","TOKEN_FIELDS","TokenQueries","POOL_FIELDS","POOL_USER_INFO_FIELDS","GET_POOL_QUERY","GET_POOLS_QUERY","GET_POOL_USER_INFO_QUERY","PoolQueries","getPoolsAsync","totalPools","poolUserInfo","ApolloClientWrapper","ApolloClient","cache","InMemoryCache","typePolicies","Query","fields","resolvers","GraphQLScalarType","description","serialize","parseValue","Mutation","headers","getApolloClient","BootstrapTooltip","styled","className","props","Tooltip","classes","popper","theme","tooltipClasses","tooltip","backgroundColor","palette","common","white","color","boxShadow","shadows","fontSize","arrow","black","Footer","maxWidth","typography","pxToRem","border","useState","setNetworkBlockHeight","rotated","setRotated","emitter","useEffect","handleEvent","heightString","heightRef","substr","mod","NetworkBlockHeightChanged","off","Box","sx","py","px","Grid","container","direction","justifyContent","alignItems","spacing","item","title","placement","Typography","variant","verticalAlign","display","mr","transform","Chip","label","size","Root","TitleTypography","HeaderLoading","AppBar","position","Toolbar","MainScrollStyled","MainScrollInner","MainScroll","children","restProps","Container","MainWrapperStyled","MainWrapper","Web3Context","React","createContext","Web3Provider","setError","wallet","setWallet","setNetwork","onSetWalletCallback","onSetNetworkCallback","Provider","ConnectedWeb3Context","useConnectedWeb3Context","useContext","ConnectedWeb3","connection","setConnection","web3Context","useWeb3Context","commonContext","initWallet","logout","useCallback","removeWallet","location","reload","active","FormatUtil","defaultMessage","log","graphQLErrors","SnackbarUtil","snackbar","enqueueSnackbar","formatMessage","QrCode","elementRef","useRef","defaultOpt","ecLevel","HIGH","minVersion","background","mode","modes","DRAW_WITH_IMAGE_BOX","radius","image","mSize","current","innerHTML","qrcode","generate","ref","LoginDialog","onClose","open","setOpen","viteClient","ConnectWalletDialog","Dialog","DialogTitle","DialogContent","DialogContentText","mt","textAlign","uri","NetworksFormControl","FormControl","margin","NetworkList","networks","getNetworks","InputLabel","Select","labelId","onChange","selectedNetwork","target","MenuItem","Header","loginOpen","setLoginOpen","href","src","alt","width","icon","truncateStringInTheMiddle","Button","onClick","Alert","Paper","padding","PoolFilter","prop","values","setValues","emitEvent","oldValues","newValues","emitPoolFilterValuesChanged","handleCheckedChange","checked","mb","xs","md","FormGroup","Stack","FormControlLabel","control","Checkbox","Switch","minWidth","TextField","autoComplete","factory","_map","getMomentFactory","FilterUtil","partition","closedPools","openPools","filtered","sorted","sortPools","searchPools","APR","orderBy","TOTAL_STAKED","term","lowerCaseTerm","PoolService","_apollo","_fetchPolicy","query","variables","fetchPolicy","poolQuery","userInfoQuery","mutate","mutation","lt","service","getPoolService","ViteUtil","gte","bn","decimalPlaces","ROUND_DOWN","toFormat","ClickOnceButton","isDisabled","setIsDisabled","handleClick","LoadingButton","loading","fullWidth","disabled","PoolCountdown","hasStarted","setHasStarted","remainingBlocks","setRemainingBlocks","countdown","setCountdown","useMemo","networkHeight","getDuration","months","days","hours","minutes","ml","Skeleton","animation","PoolDepositDialog","setAmount","setDisabled","poolService","changeAmount","state","handleClose","setState","handleConfirmAsync","enqueueError","htmlFor","Input","autoFocus","startAdornment","InputAdornment","DialogActions","AccountService","PoolWithdrawDialog","getStakedAmount","formatBigNumber","accountService","getBalanceAsync","PoolDialog","WITHDRAW","DEPOSIT","Rewards","setPool","rewardTokens","setRewardTokens","newRewardTokens","calculateRewardTokens","setCanClaim","updateRewardPerToken","newPool","NetRewards","calculateNetRewardTokens","Tokens","BigCoin","Avatar","SmallCoin","grey","coinUtil","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","mapIconUrl","TransparentPaper","paddingTop","PoolListItem","dialogState","setDialogState","canStake","setCanStake","canClaim","canWithdraw","setCanWithdraw","tempnetwork","handleClickClaimAsync","Accordion","defaultExpanded","AccordionSummary","expandIcon","severity","AccordionDetails","pt","Link","underline","cursor","lg","zeroMinWidth","noWrap","showStaked","emitConnectWalletDialog","PoolList","isLoading","setIsLoading","allPools","setAllPools","setPools","setFilter","filterPools","PoolFilterValuesChanged","replacePool","findIndex","updatedPools","handlePoolEvent","PoolDeposit","PoolWithdraw","HeroContent","borderRadius","Hero","align","paragraph","Pools","useQuery","pb","Transition","forwardRef","Slide","ConfirmTransactionDialog","TransitionComponent","keepMounted","style","zIndex","Network","refetch","emitNetworkBlockHeightChanged","WarningDialog","reason","Main","useSnackbar","Background","BackgroundSVG","App","apolloClient","config","EXPONENTIAL_AT","maxSnack","ApolloProvider","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","createTheme","fontFamily","join","h6","primary","main","secondary","red","A400","ReactDOM","render","ThemeProvider","CssBaseline","document","querySelector","String","defaultValue","ms","blob","min","max","Math","floor","lh","rh","truncateString","str","strPositionStart","strPositionEnd","GlobalEmitter","emit","PoolUpdate","EventEmitter","WalletType","WalletAccountType","Wallet","_type","accounts","baseInitinit","createAccount","forEach","Web","WebWallet","Session","SessionWallet","mnemonic","session","WalletAccount","baseInit","WalletConnector","walletManager","opts","meta","saveSession","stopBizHeartBeat","listener","sessionAccounts","getWallet","updateWalletStore","res","rej","sendCustomRequest","r","updateSession","catch","Connector","getValidSession","bridge","lastAccount","createSession","WalletStore","_webWalletKey","_sessionWalletKey","localStorage","removeItem","sessionStorage","getItem","fromJS","saveData","setItem","WalletManager","_store","_wallet","_mnemonicDeriveIndex","_setWalletCallback","updateWallet","validateMnemonic","resetWallet","createWebWalletAccount","setActiveAccount","deriveAddress","mnemonics","createAddressByPrivateKey","validateMnemonics"],"mappings":"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","file":"static/js/main.e63b0679.chunk.js","sourcesContent":["import { abi as abiutils, accountBlock, utils, ViteAPI } from \"@vite/vitejs\";\nimport { getEmitter, IGlobalEmitter } from \"../util/emitter.util\";\nimport { getLogger } from \"../util/logger\";\nimport { Task } from \"../util/task\";\nimport { Network, VmLog } from \"../util/types\";\nimport { getWalletManager, IWalletConnector, SessionWalletAccount, WalletAccount, WalletConnectorFactory, WalletManager, WebWalletAccount } from \"../wallet\";\nconst { WS_RPC } = require('@vite/vitejs-ws');\n\nconst logger = getLogger();\n\nconst providerTimeout = 60000;\nconst providerOptions = { retryTimes: 10, retryInterval: 5000 };\n\nexport class ViteClient {\n  private _isConnected: boolean;\n  private _connector?: IWalletConnector;\n  private _provider?: any;\n  private _client?: any;\n  private readonly _emitter: IGlobalEmitter;\n  private readonly _walletManager: WalletManager;\n  private readonly _connectorFactory: WalletConnectorFactory;\n\n  constructor() {\n    this._isConnected = false;\n    this._emitter = getEmitter();\n    this._walletManager = getWalletManager();\n    this._connectorFactory = new WalletConnectorFactory(this._walletManager);\n  }\n\n  get isConnected(): boolean {\n    return this._isConnected;\n  }\n\n  get connector(): Maybe<IWalletConnector> {\n    return this._connector;\n  }\n\n  initAsync = async (network: Network) => new Promise<void>((resolve, reject) => {\n    this._connector = this._connectorFactory.create(network)\n    this._provider = new WS_RPC(network.rpcUrl, providerTimeout, providerOptions);\n    let isResolved = false;\n    this._provider.on('error', (err: any) => {\n      logger.error(err)();\n      if (isResolved) return;\n      reject(err);\n      this._isConnected = false;\n    });\n    this._client = new ViteAPI(this._provider, () => {\n      logger.info(`ViteAPI connected to ${this._provider.path}`)();\n      isResolved = true;\n      resolve();\n      this._isConnected = true;\n    });\n  });\n\n  dispose(): void {\n    logger.info(\"Disposing ViteClient\")();\n    this._provider?.disconnect();\n    this._isConnected = false;\n  }\n\n  async requestAsync(method: string, ...args: any[]): Promise<any> {\n    if (this._isConnected && this._client) {\n      return this._client.request(method, ...args);\n    } else {\n      return Promise.reject('Vite client is not ready to make requests.');\n    }\n  }\n\n  async callContractAsync(account: WalletAccount, methodName: string, abi: any, params: any, tokenId: any, amount: string, toAddress: string): Promise<any> {\n    let block = accountBlock\n      .createAccountBlock(\"callContract\", {\n        address: account.address,\n        abi,\n        methodName,\n        tokenId,\n        amount,\n        toAddress,\n        params,\n      })\n\n    if (account instanceof WebWalletAccount) {\n      block = block.setProvider(this._client).setPrivateKey(account.privateKey);\n      await block.autoSetPreviousAccountBlock();\n      const result = await block.sign().send();\n      return result;\n    } else if (account instanceof SessionWalletAccount) {\n      if (this.connector) {\n        this._emitter.emitConfirmTransactionDialog(true);\n        try {\n          const result = await this.connector.sendTransactionAsync({\n            block: block.accountBlock\n          });\n          this._emitter.emitConfirmTransactionDialog(false);\n          return result;\n        } catch (error) {\n          this._emitter.emitConfirmTransactionDialog(false);\n          throw error\n        }\n      } else {\n        throw new Error(\"Connector is not defined\");\n      }\n    } else {\n      throw new Error(\"Account not supported\");\n    }\n  }\n\n  async callOffChainMethodAsync(contractAddress: string, abi: any, offchaincode: string, params: any): Promise<any> {\n    let data = abiutils.encodeFunctionCall(abi, params);\n    let dataBase64 = Buffer.from(data, \"hex\").toString(\"base64\");\n    let result = await this.requestAsync(\"contract_callOffChainMethod\", {\n      selfAddr: contractAddress,\n      offChainCode: offchaincode,\n      data: dataBase64,\n    });\n    if (result) {\n      let resultBytes = Buffer.from(result, \"base64\").toString(\"hex\");\n      let outputs = [];\n      for (let i = 0; i < abi.outputs.length; i++) {\n        outputs.push(abi.outputs[i].type);\n      }\n      let offchainDecodeResult = abiutils.decodeParameters(outputs, resultBytes);\n      let resultList = [];\n      if (offchainDecodeResult) {\n        for (let i = 0; i < abi.outputs.length; i++) {\n          if (abi.outputs[i].name) {\n            resultList.push({\n              name: abi.outputs[i].name,\n              value: offchainDecodeResult[i],\n            });\n          } else {\n            resultList.push({\n              name: \"\",\n              value: offchainDecodeResult[i],\n            });\n          }\n        }\n      }\n      return resultList;\n    }\n    return \"\";\n  }\n\n  decodeVmLog(vmLog: any, abi: any): Maybe<VmLog> {\n    let topics = vmLog.topics;\n    for (let j = 0; j < abi.length; j++) {\n      let abiItem = abi[j];\n      if (abiutils.encodeLogSignature(abiItem) === topics[0]) {\n        if (vmLog.data) {\n          let log: VmLog = {\n            topic: topics[0],\n            args: abiutils.decodeLog(\n              abiItem.inputs,\n              utils._Buffer.from(vmLog.data, \"base64\").toString(\"hex\"),\n              topics.slice(1)\n            ),\n            event: abiItem.name,\n          };\n          return log;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  async createAddressListenerAsync(address: string): Promise<any> {\n    const payload = {\n      addressHeightRange: {\n        placeholder: {\n          fromHeight: \"0\",\n          toHeight: \"0\",\n        },\n      },\n    };\n    let tempPayload = JSON.stringify(payload);\n    tempPayload = tempPayload.replace(\"placeholder\", address);\n    const result = await this._client?.subscribe(\"createVmlogSubscription\", JSON.parse(tempPayload));\n    return result;\n  }\n\n  removeListener(event: any): void {\n    this._client?.unsubscribe(event);\n  }\n\n  async waitForAccountBlockAsync(address: string, height: string): Promise<any> {\n    return new Promise(async (resolve, reject) => {\n      let result: any = undefined;\n      let error: any = undefined;\n      const task = new Task(async () => {\n        try {\n          let blockByHeight = await this.requestAsync(\n            'ledger_getAccountBlockByHeight',\n            address,\n            height\n          );\n\n          if (!blockByHeight) {\n            return true;\n          }\n\n          let receiveBlockHash = blockByHeight.receiveBlockHash;\n          if (!receiveBlockHash) {\n            return true;\n          }\n\n          let blockByHash = await this.requestAsync('ledger_getAccountBlockByHash', receiveBlockHash);\n          if (!blockByHash) {\n            return true;\n          }\n\n          result = {\n            ...this.getAccountBlockStatus(blockByHash),\n            accountBlock: blockByHash\n          }\n\n          return false;\n        } catch (err) {\n          error = err\n          return false;\n        }\n      }, 500);\n      task.start(() => {\n        if (error) {\n          reject(error);\n        } else {\n          resolve(result);\n        }\n      });\n    });\n  }\n\n  private getAccountBlockStatus(accountBlock: any) {\n    let status = this.resolveAccountBlockData(accountBlock);\n    let statusTxt = '';\n    switch (status) {\n      case 0:\n        statusTxt = '0, Execution succeed';\n        break;\n      case 1:\n        statusTxt = '1, Execution reverted';\n        break;\n      case 2:\n        statusTxt = '2, Max call depth exceeded';\n        break;\n    }\n    return {\n      status,\n      statusTxt\n    };\n  }\n\n  private resolveAccountBlockData(accountBlock: any) {\n    if (\n      (accountBlock.blockType !== 4 && accountBlock.blockType !== 5) ||\n      !accountBlock.data\n    ) {\n      return 0;\n    }\n    let bytes = utils._Buffer.from(accountBlock.data, 'base64');\n\n    if (bytes.length !== 33) {\n      return 0;\n    }\n    return bytes[32];\n  }\n}\n\nconst client = new ViteClient();\n\nexport const getViteClient = () => {\n  return client;\n}","export class Task {\n  private _taskTimer: NodeJS.Timeout | undefined\n  private _taskInterval: number\n  private _task: () => Promise<boolean>\n  private _callback?: () => any\n\n  constructor(task: () => Promise<boolean>, interval: number) {\n    this._task = task;\n    this._taskInterval = interval;\n\n    return this;\n  }\n\n  _run(): void {\n    this._taskTimer = setTimeout(async () => {\n      if (!this._task) {\n        this._onStop();\n        return;\n      }\n      if (!(await this._task())) {\n        this._onStop();\n        return;\n      }\n      this._run();\n    }, this._taskInterval);\n  }\n\n  _onStop() {\n    this._callback && this._callback();\n  }\n\n  start(callback?: () => any): void {\n    this._callback = callback;\n    if (this._taskTimer) {\n      return;\n    }\n\n    this._run();\n  }\n\n\n  stop(): void {\n    this._onStop();\n    if (!this._taskTimer) {\n      return;\n    }\n    window.clearTimeout(this._taskTimer);\n    this._taskTimer = undefined;\n  }\n}","import { GenericType, Network, PoolFilterValues, PoolSortType, Token } from \"../util/types\"\n\nexport const CommonConstants = {\n  APP_NAME: 'Staking Pools',\n  WEB_WALLET_STORAGE_SPACE: 'VSP_WEB_WALLET',\n  SESSION_WALLET_STORAGE_SPACE: 'VSP_SESSION_WALLET',\n  POOLS_CONTRACT_ADDRESS_v04: 'vite_12e90482e9e13bbbeb1919e7993ffadd375f6b7aa483452cbf',\n  POOLS_CONTRACT_ADDRESS_v03: 'vite_6217fbda565d83ea03d23034054fb036a0d7a540993354e1e6',\n  POOLS_CONTRACT_ADDRESS_v02: 'vite_6b97e21d57909a881db29385b2339725ebbdf708b9eb487985',\n  POOLS_CONTRACT_ADDRESS_v01: 'vite_65ea4fbb8fc4a0f5cac745e0a97844ff2e9e4287aa0c35a28f',\n  POOLS_CONTRACT_ADDRESS_TESTNET: 'vite_bf52ded4994c8bf69628db1ef359dd9123dfe378048803f61c',\n  VITE_TOKEN_ID: 'tti_5649544520544f4b454e6e40',\n  REWARD_FACTOR: 1e36 // 10^36 = new BigNumber(10).pow(36)\n}\n\n\nexport const Networks: Network[] = [\n  {\n    id: 1,\n    networkId: 1,\n    name: 'MAINNET v0.4',\n    rpcUrl: 'wss://vitestats.com/ws',\n    connectorUrl: 'wss://biforst.vite.net'\n  },\n  {\n    id: 2,\n    networkId: 1,\n    name: 'MAINNET v0.3',\n    rpcUrl: 'wss://vitestats.com/ws',\n    connectorUrl: 'wss://biforst.vite.net'\n  },\n  {\n    id: 3,\n    networkId: 2,\n    name: 'TESTNET',\n    rpcUrl: 'wss://buidl.vite.net/gvite/ws', // https://buidl.vite.net/gvite\n    connectorUrl: 'wss://biforst.vite.net'\n  },\n  {\n    id: 4,\n    networkId: 2,\n    name: 'TESTNET+MOCK',\n    rpcUrl: 'wss://buidl.vite.net/gvite/ws',\n    connectorUrl: 'wss://biforst.vite.net'\n  },\n  {\n    id: 5,\n    networkId: 5,\n    name: 'DEBUG',\n    rpcUrl: 'ws://localhost:23457',\n    connectorUrl: 'wss://biforst.vite.net'\n  },\n  {\n    id: 6,\n    networkId: 1,\n    name: 'MAINNET v0.2',\n    rpcUrl: 'wss://vitestats.com/ws',\n    connectorUrl: 'wss://biforst.vite.net'\n  },\n  {\n    id: 7,\n    networkId: 1,\n    name: 'MAINNET v0.1',\n    rpcUrl: 'wss://vitestats.com/ws',\n    connectorUrl: 'wss://biforst.vite.net'\n  },\n]\n\nexport const TypeNames = {\n  Pool: \"Pool\",\n  PoolUserInfo: \"PoolUserInfo\",\n  Token: \"Token\"\n}\n\nexport const UnknownToken: Token = {\n  __typename: TypeNames.Token,\n  id: \"-1\",\n  name: \"UNKNOWN\",\n  symbol: \"UNKNOWN\",\n  originalSymbol: \"UNKNOWN\",\n  decimals: 0,\n  iconUrl: undefined,\n  url: undefined\n}\n\nexport const CustomDefinedTokens = new Map<string, Token>([\n  ['tti_11ab030f38ab5ebf9379e931',\n    {\n      __typename: TypeNames.Token,\n      id: \"tti_11ab030f38ab5ebf9379e931\",\n      name: \"VXX\",\n      symbol: \"VXX-000\",\n      originalSymbol: \"VXX\",\n      decimals: 18,\n      iconUrl: \"localvx.png\",\n      url: \"https://coinmarketcap.com/currencies/vitex-coin/\"\n    }\n  ],\n  ['tti_2511d9c93e4f98318eef6f56',\n    {\n      __typename: TypeNames.Token,\n      id: \"tti_2511d9c93e4f98318eef6f56\",\n      name: \"Viva\",\n      symbol: \"VIVA-001\",\n      originalSymbol: \"VIVA\",\n      decimals: 18,\n      iconUrl: \"localviva.png\",\n      url: \"https://vivafi.org\"\n    }\n  ],\n\n]);\n\n\nexport const PoolSortTypes: GenericType[] = [\n  {\n    name: \"\",\n    type: \"DEFAULT\"\n  },\n  {\n    name: \"APR\",\n    type: \"APR\"\n  },\n  {\n    name: \"Total staked\",\n    type: \"TOTAL_STAKED\"\n  }\n]\n\nexport const DefaultPoolFilterValues: PoolFilterValues = {\n  stakedOnly: false,\n  showLive: true,\n  sortBy: PoolSortTypes[PoolSortType.DEFAULT].type,\n  search: \"\"\n}","import BigNumber from \"bignumber.js\"\n\nexport interface GenericType {\n  name: string;\n  type: string;\n}\n\nexport type Contract = {\n  address: string\n  contractName: string\n  binary: string\n  offChain: string\n  abi: any[]\n}\n\nexport type Network = {\n  id: number\n  networkId: number\n  name: string\n  rpcUrl: string\n  connectorUrl: string\n}\n\nexport type Token = {\n  __typename: string\n  id: string\n  name: string\n  symbol: string\n  originalSymbol: string\n  decimals: number\n  iconUrl: Maybe<string>\n  url: Maybe<string>\n}\n\nexport type Pool = {\n  __typename: string\n  id: number\n  stakingToken: Token\n  rewardToken: Token\n  apr?: Maybe<BigNumber>\n  totalStaked: BigNumber\n  totalRewards: BigNumber\n  startBlock: BigNumber\n  endBlock: BigNumber\n  endTimestamp: number\n  latestRewardBlock: BigNumber\n  rewardPerPeriod: BigNumber\n  rewardPerToken: BigNumber\n  paidOut: BigNumber\n  userInfo?: Maybe<PoolUserInfo>\n  fetchTimestamp: number\n}\n\nexport type ContractPool = {\n  stakingTokenId: string\n  rewardTokenId: string\n  totalStakingBalance: string\n  totalRewardBalance: string\n  startBlock: string\n  endBlock: string\n  latestRewardBlock: string\n  rewardPerPeriod: string\n  rewardPerToken: string\n  paidOut: string\n}\n\nexport type PoolUserInfo = {\n  __typename: string\n  id: string\n  poolId: number\n  account: string\n  stakingBalance: BigNumber\n  rewardDebt: BigNumber\n}\n\nexport type ContractPoolUserInfo = {\n  poolId: number\n  address: string\n  stakingBalance: string\n  rewardDebt: string\n}\n\nexport type PoolFilterValues = {\n  stakedOnly: boolean\n  showLive: boolean\n  sortBy: string\n  search: string\n}\n\nexport enum PoolSortType {\n  DEFAULT = 0,\n  APR = 1,\n  TOTAL_STAKED = 2\n}\n\nexport type PoolDialogState = {\n  type: PoolDialogType\n  open: boolean\n}\n\nexport enum PoolDialogType {\n  DEPOSIT = 0,\n  WITHDRAW = 1,\n  CLAIM = 2\n}\n\nexport enum GlobalEvent {\n  ConfirmTransactionDialog = 'ConfirmTransactionDialog',\n  ConnectWalletDialog = 'ConnectWalletDialog',\n  NetworkBlockHeightChanged = 'NetworkBlockHeightChanged',\n  PoolFilterValuesChanged = 'PoolFilterValuesChanged',\n  PoolDeposit = 'PoolDeposit',\n  PoolWithdraw = 'PoolWithdraw',\n  PoolUpdate = 'PoolUpdate'\n}\n\nexport type VmLog = {\n  event: string\n  topic: string\n  args: any\n}\n\nexport enum VmLogEvent {\n  PoolCreated = 'PoolCreated',\n  Deposit = 'Deposit',\n  Withdraw = 'Withdraw'\n}","import { CommonUtil } from './common.util';\n\nexport class LogEventModel {\n  banner?: string;\n  args?: any[];\n\n  public constructor(init?: Partial<LogEventModel>) {\n    Object.assign(this, init);\n  }\n}\n\nexport interface ILogger {\n  // Make sure level is selected e.g. 'Verbose' in Chrome\n  readonly debug: any;\n  readonly info: any;\n  readonly warn: any;\n  readonly error: any;\n}\n\nconst noop = (): any => undefined;\n\nexport class ConsoleLogger implements ILogger {\n\n  private get isEnabled(): boolean {\n    return Boolean(process.env.REACT_APP_IS_DEV);\n  }\n\n  get debug() {\n    if (this.isEnabled) {\n      return console.debug.bind(console);\n    } else {\n      return noop;\n    }\n  }\n\n  get info() {\n    if (this.isEnabled) {\n      return console.info.bind(console);\n    } else {\n      return noop;\n    }\n  }\n\n  get warn() {\n    if (this.isEnabled) {\n      return console.warn.bind(console);\n    } else {\n      return noop;\n    }\n  }\n\n  get error() {\n    if (this.isEnabled) {\n      return console.error.bind(console);\n    } else {\n      return noop;\n    }\n  }\n}\n\nexport class ExtendedConsoleLogger implements ILogger {\n\n  private get isEnabled(): boolean {\n    return Boolean(process.env.REACT_APP_IS_DEV);\n  }\n\n  private timestamp(type: string): string {\n    return `[${type} ${new Date().toLocaleTimeString()}]`;\n  }\n\n  private createLogEventModel(type: string, ...args: any[]): LogEventModel {\n    const mapFn = (e: any) => {\n      if (CommonUtil.isString(e)) {\n        return e;\n      } else if (e instanceof Error) {\n        return e.message;\n      }\n      return CommonUtil.toJsonString(e);\n    };\n    const result = new LogEventModel({\n      banner: this.timestamp(type),\n      args: args?.map(e => Array.isArray(e) ? e.map(e1 => mapFn(e1)) : mapFn(e))\n    });\n    return result;\n  }\n\n  get debug() {\n    if (this.isEnabled) {\n      return (...args: any[]) => {\n        const result = this.createLogEventModel('DEBUG', args);\n        return Function.prototype.bind.call(console.debug, console, result.banner, ...args);\n      };\n    } else {\n      return noop;\n    }\n  }\n\n  get info() {\n    if (this.isEnabled) {\n      return (...args: any[]) => {\n        const result = this.createLogEventModel('INFO', args);\n        return Function.prototype.bind.call(console.info, console, result.banner, ...args);\n      };\n    } else {\n      return noop;\n    }\n  }\n\n  get warn() {\n    if (this.isEnabled) {\n      return (...args: any[]) => {\n        const result = this.createLogEventModel('WARN', args);\n        return Function.prototype.bind.call(console.warn, console, result.banner, ...args);\n      };\n    } else {\n      return noop;\n    }\n  }\n\n  get error() {\n    if (this.isEnabled) {\n      return (...args: any[]) => {\n        if (args?.length > 0) {\n          if (!CommonUtil.isString(args[0])) {\n            args.push('(See console output for more information.)');\n          }\n        }\n        const result = this.createLogEventModel('ERROR', args);\n        return Function.prototype.bind.call(console.error, console, result.banner, ...args);\n      };\n    } else {\n      return noop;\n    }\n  }\n}\n\nconst logger = new ExtendedConsoleLogger();\n\nexport const getLogger = (): ILogger => {\n  return logger;\n}","import fs from 'fs';\n\nexport abstract class FileUtil {\n  abstract readFileAsync(path: string): Promise<any>;\n}\n\nexport class BrowserFileUtil extends FileUtil {\n  async readFileAsync(path: string): Promise<any> {\n    const response = await fetch(path);\n    return response.text();\n  }\n}\n\nexport class LocalFileUtil extends FileUtil {\n  public async readFileAsync(path: string): Promise<any> {\n    return Promise.resolve(fs.readFileSync(path, 'utf8'));\n  }\n}\n\nexport enum FileUtilType {\n  Browser = 0,\n  Local = 1\n}\n\nexport const getFileUtil = (type: FileUtilType = FileUtilType.Browser) => {\n  switch (type) {\n    case FileUtilType.Local:\n      return new LocalFileUtil();\n    default:\n      return new BrowserFileUtil();\n  }\n}","export default __webpack_public_path__ + \"static/media/bg2.36ac1f86.svg\";","export class CoinUtil {\n  private readonly _iconUrlMap: Map<string, string>;\n  private readonly _coinMarketCapMap: Map<string, string>;\n  private readonly _coingeckoMap: Map<string, string>;\n\n  constructor() {\n    this._iconUrlMap = new Map<string, string>([\n      [\"https://static.vite.net/token-profile-1257137467/icon/e6dec7dfe46cb7f1c65342f511f0197c.png\", \"./assets/coins/vite.png\"],\n      [\"https://static.vite.net/token-profile-1257137467/icon/5faa1fa2b952137081e36c51af2b493c.png\", \"./assets/coins/usdc.png\"],\n      [\"https://static.vite.net/token-profile-1257137467/icon/3c231a8309999ad226afa097488a6158.png\", \"./assets/coins/dai.png\"],\n      [\"localdai.png\", \"./assets/coins/dai.png\"],\n      [\"localvx.png\", \"./assets/coins/vx.png\"],\n      [\"localviva.png\", \"./assets/coins/viva.png\"]\n    ]);\n    this._coinMarketCapMap = new Map<string, string>();\n    this._coingeckoMap = new Map<string, string>([\n      [\"PancakeSwap\",\"pancakeswap-token\"]\n    ]);\n  }\n\n  mapIconUrl(iconUrl?: Maybe<string>): string {\n    if (!iconUrl) {\n      return \"\";\n    }\n    const existing = this._iconUrlMap.get(iconUrl);\n    return existing ?? iconUrl;\n  }\n\n  mapCoinMarketCapName(name: string): string {\n    const existing = this._coinMarketCapMap.get(name);\n    return existing ?? name.replace(\" \", \"-\").toLowerCase();\n  }\n\n  mapCoingeckoName(name: string): string {\n    const existing = this._coingeckoMap.get(name);\n    return existing ?? name.replace(\" \", \"-\").toLowerCase();\n  }\n}\n\nconst util = new CoinUtil();\n\nexport const getCoinUtil = (): CoinUtil => {\n  return util;\n}","import BigNumber from \"bignumber.js\";\nimport CoinGecko from \"coingecko-api\";\nimport { CoinUtil, getCoinUtil } from \"../util/coin.util\";\nimport { getLogger } from \"../util/logger\";\n\nconst logger = getLogger();\n\nexport class CoingeckoClient {\n  private readonly _client: any;\n  private readonly _coinUtil: CoinUtil;\n\n  constructor() {\n    this._client = new CoinGecko();\n    this._coinUtil = getCoinUtil();\n  }\n\n  async getTokenPriceUSDAsync(name: string): Promise<BigNumber> {\n    try {\n      const mappedName = this._coinUtil.mapCoingeckoName(name);\n      const params = { ids: mappedName };\n      const result = await this._client.simple.price(params);\n      const usdprice = result?.data[mappedName]?.usd;\n      if(usdprice === undefined){\n        return new BigNumber(0)\n      }\n      return new BigNumber(usdprice);\n    } catch (error) {\n      logger.error(error)();\n      return new BigNumber(0);\n    }\n  }\n}\n\nconst client = new CoingeckoClient();\n\nexport const getCoingeckoClient = () => {\n  return client;\n}","import BigNumber from \"bignumber.js\";\nimport axios from 'axios';\n\ntype BaseResult<T> = {\n  code: number,\n  data: T\n}\n\nexport type TokenLinks = {\n  website: string\n}\n\nexport type TokenDetailResult = {\n  name: string\n  symbol: string\n  originalSymbol: string\n  tokenDecimals: number\n  urlIcon: string\n  links: TokenLinks\n}\n\nexport type TokenPriceResult = Array<TokenPriceEntry>;\n\nexport type TokenPriceEntry = {\n  tokenId: string\n  tokenSymbol: string\n  usdRate: number\n  cnyRate: number\n  rubRate: number\n  krwRate: number\n  tryRate: number\n  vndRate: number\n  eurRate: number\n  gbpRate: number\n  inrRate: number\n  btcRate: number\n}\n\n\nexport class VitexClient {\n  private readonly _baseUrl_v1: string;\n  private readonly _baseUrl_v2: string;\n\n\n  constructor() {\n    this._baseUrl_v1 = \"https://vitex.vite.net\"\n    this._baseUrl_v2 = \"https://api.vitex.net\"\n  }\n\n  async getTokenDetailAsync(tokenId: string): Promise<Maybe<TokenDetailResult>> {\n    const result = await axios.get<BaseResult<TokenDetailResult>>(this._baseUrl_v1 + \"/api/v1/token/detail?tokenId=\" + tokenId);\n    return result.data.data;\n  }\n\n  async getTokenPriceAsync(tokenId: string): Promise<TokenPriceResult> {\n    const result = await axios.get<BaseResult<TokenPriceResult>>(this._baseUrl_v2 + \"/api/v2/exchange-rate?tokenIds=\" + tokenId);\n    return result.data.data\n  }\n\n  async getTokenPriceUSDAsync(tokenId: string): Promise<BigNumber> {\n    try {\n      const result = await this.getTokenPriceAsync(tokenId)\n      return new BigNumber(result[0].usdRate);\n    } catch (error) {\n//      logger.error(error)();\n      return new BigNumber(0);\n    }\n  }  \n\n}\n\nconst client = new VitexClient();\n\nexport const getVitexClient = () => {\n  return client;\n}\n","export class Ensure {\n\n  public static notNull(property: any, propertyName: string, message?: string) {\n    if (property === null || property === undefined) {\n      if (message) {\n        throw new Error(message);\n      } else {\n        throw new Error('Unexpected null exception. ' + propertyName);\n      }\n    }\n  }\n\n  public static notNullOrWhiteSpace(property: Maybe<string>, propertyName: string, message?: string) {\n    if (property === null || property === undefined || property?.trim() === '') {\n      if (message) {\n        throw new Error(message);\n      } else {\n        throw new Error('Unexpected null exception. ' + propertyName);\n      }\n    }\n  }\n\n  public static maxLength(property: Maybe<string>, propertyName: string, maxLength: number) {\n    if (property && property.length > maxLength) {\n      throw new Error(`${propertyName} exceeds the maximum length of ${maxLength}`);\n    }\n  }\n\n}\n","import moment from 'moment';\n\nexport class MomentUtil {\n  private readonly _locale: string;\n\n  constructor(locale?: Maybe<string>) {\n    if (locale) {\n      this._locale = locale;\n    } else {\n      this._locale = navigator.language;\n    }\n    moment.locale(this._locale);\n  }\n\n  public getLocale(): string {\n    return this._locale;\n  }\n\n  public get(): moment.Moment {\n    return moment();\n  }\n\n  public getDuration(seconds: number): moment.Duration {\n    return moment.duration(seconds, 'seconds');\n  }\n\n  public getFromUnix(date: number) {\n    return moment.unix(date);\n  }\n\n  public getFromMilliseconds(date: number) {\n    return moment(date, 'x');\n  }\n\n  public getLocal(date: any): moment.Moment {\n    return moment.utc(date).local();\n  }\n\n  public getLocalTime(date: any): string {\n    return this.getLocal(date).format('LTS');\n  }\n\n  public getLocalDate(date: any): string {\n    return this.getLocal(date).format('L');\n  }\n\n  public getLocalFormatted(date: any): string {\n    return this.getLocalTime(date) + ' ' + this.getLocalDate(date);\n  }\n\n  public getLocalReverseFormatted(date: any): string {\n    return this.getLocalDate(date) + ' ' + this.getLocalTime(date);\n  }\n\n  public isExpired(timestamp: number): boolean {\n    try {\n      if (timestamp >= 0) {\n        return moment.utc().unix() >= timestamp;\n      }\n      return false;\n    } catch (error) {\n      return false;\n    }\n  }\n}","import BigNumber from \"bignumber.js\";\nimport { CoingeckoClient, getCoingeckoClient } from \"../clients/coingecko.client\";\nimport { getVitexClient, VitexClient } from \"../clients/vitex.client\";\nimport { CustomDefinedTokens, TypeNames, UnknownToken } from \"../common/constants\";\nimport { CoinUtil, getCoinUtil } from \"../util/coin.util\";\nimport { getEmitter, IGlobalEmitter } from \"../util/emitter.util\";\nimport { Ensure } from \"../util/ensure\";\nimport { getLogger } from \"../util/logger\";\nimport { MomentUtil } from \"../util/moment.util\";\nimport { ContractPool, ContractPoolUserInfo, Pool, PoolUserInfo, Token } from \"../util/types\";\nimport { getWalletManager, WalletAccount, WalletManager } from \"../wallet\";\n\nconst logger = getLogger();\n\nexport interface IDataSource {\n  initAsync(): Promise<void>;\n  dispose(): void;\n  getAccountBalanceAsync(_account: string): Promise<BigNumber>;\n  getNetworkBlockHeightAsync(): Promise<BigNumber>;\n  getPoolAsync(_id: number, _account?: Maybe<string>): Promise<Pool>;\n  getPoolsAsync(_account?: Maybe<string>): Promise<Pool[]>;\n  getPoolUserInfoAsync(_poolId: number, _account?: Maybe<string>): Promise<Maybe<PoolUserInfo>>;\n  getTokenAsync(_id: string): Promise<Token>;\n  getTotalPoolsAsync(): Promise<number>;\n  depositAsync(_id: number, _tokenId: string, _amount: string): Promise<boolean>;\n  withdrawAsync(_id: number, _amount: string): Promise<boolean>;\n}\n\nexport abstract class BaseDataSource implements IDataSource {\n  protected readonly _emitter: IGlobalEmitter;\n  private readonly _walletManager: WalletManager;\n  private readonly _coingeckoClient: CoingeckoClient;\n  private readonly _vitexClient: VitexClient;\n  private readonly _coinUtil: CoinUtil;\n  private readonly _tokens: Map<string, Token>;\n  private _moment: MomentUtil = new MomentUtil();\n\n  constructor() {\n    this._emitter = getEmitter();\n    this._walletManager = getWalletManager();\n    this._coingeckoClient = getCoingeckoClient();\n    this._vitexClient = getVitexClient();\n    this._coinUtil = getCoinUtil();\n    this._tokens = new Map<string, Token>();\n  }\n\n  async initAsync(): Promise<void> {\n    logger.info(\"Init BaseDataSource\")();\n    this._moment = new MomentUtil();\n    await this.initAsyncProtected();\n  }\n\n  dispose(): void {\n    logger.info(\"Disposing BaseDataSource\")();\n    this._tokens.clear();\n    this.disposeProtected();\n  }\n\n  getAccount(): WalletAccount {\n    const account = this._walletManager.getActiveAccount();\n    Ensure.notNull(account, \"account\", \"Please connect your wallet first.\");\n    return account as WalletAccount;\n  }\n\n  async getAprAsync(pool: Pool): Promise<Maybe<BigNumber>> {\n    try {\n      if (pool.endTimestamp >= 0 && (this._moment.isExpired(pool.endTimestamp) || pool.latestRewardBlock === pool.endBlock)) {\n        // pool is closed, should not display numeric APR.\n        return undefined;\n      }\n\n      // FIXME : decimal factor will likely break if power separation is too great.\n      const decimalFactor = new BigNumber(10).pow( pool.stakingToken.decimals - pool.rewardToken.decimals );\n      //const stakingTokenPrice = await this._coingeckoClient.getTokenPriceUSDAsync(pool.stakingToken.name);\n      //const rewardTokenPrice = await this._coingeckoClient.getTokenPriceUSDAsync(pool.rewardToken.name);\n\n      const stakingTokenPrice = await this.getTokenPriceUSDAsync(pool.stakingToken);\n      const rewardTokenPrice = await this.getTokenPriceUSDAsync(pool.rewardToken);\n\n      const totalTime = pool.endBlock.minus(pool.startBlock);\n      const secondsInYear = new BigNumber(365 * 24 * 60 * 60);\n      const toPercent = new BigNumber(100);\n\n      const apr = rewardTokenPrice.times(decimalFactor).times(pool.totalRewards).dividedBy(stakingTokenPrice.times(pool.totalStaked).times(totalTime)).times(secondsInYear).times(toPercent);\n      \n      return !apr.isFinite() || apr.isNaN() ? undefined : apr;\n    } catch (error) {\n      logger.error(error)();\n      return undefined;\n    }\n  }\n\n  async getTokenPriceUSDAsync(token : Token) : Promise<BigNumber>{\n\n    try {\n      const price = await this._coingeckoClient.getTokenPriceUSDAsync(token.name);\n      if ( price.toNumber() === Number(0)) {\n        throw(new Error(\"Coingecko price lookup failed. Trying ViteX\"));\n      }\n      return price;\n    } catch {\n      try {\n        return await this._vitexClient.getTokenPriceUSDAsync(token.id);\n      } catch {\n        return new BigNumber(0)\n      }\n    }\n  }\n\n\n  async getEndTimestampAsync(endBlock: BigNumber): Promise<number> {\n    try {\n      if (!endBlock || endBlock.lte(0)) {\n        return -1;\n      }\n      const networkBlockHeight = await this.getNetworkBlockHeightAsync();\n      const remainingSeconds = endBlock.minus(networkBlockHeight);\n      if (remainingSeconds.lte(0)) {\n        return 0;\n      }\n      return this._moment.get().add(remainingSeconds.toNumber(), \"seconds\").unix();\n    } catch (error) {\n      logger.error(error)();\n    }\n    return 0;\n  }\n\n  async getTokenAsync(id: string): Promise<Token> {\n    try {\n      const existing = this._tokens.get(id);\n      if (existing) {\n        return existing;\n      }\n\n      const customToken = CustomDefinedTokens.get(id);\n      if (customToken) {\n        return customToken;\n      }\n\n      const result = await this._vitexClient.getTokenDetailAsync(id);\n      if (result) {\n        const token = {\n          __typename: \"Token\",\n          id,\n          name: result.name,\n          symbol: result.symbol,\n          originalSymbol: result.originalSymbol,\n          decimals: result.tokenDecimals,\n          iconUrl: result.urlIcon,\n          url: result.links.website\n          //url: \"https://coinmarketcap.com/currencies/\" + this._coinUtil.mapCoinMarketCapName(result.name)\n        }\n        this._tokens.set(id, token);\n        return token;\n      }\n    } catch (error) {\n      logger.error(error)();\n    }\n    const unknownToken = {\n      ...UnknownToken,\n      id\n    }\n    this._tokens.set(id, unknownToken);\n    return unknownToken;\n  }\n\n  protected async toPoolAsync(id: number, p: ContractPool): Promise<Pool> {\n    const stakingToken = await this.getTokenAsync(p.stakingTokenId);\n    const rewardToken = await this.getTokenAsync(p.rewardTokenId);\n    const endTimestamp = await this.getEndTimestampAsync(new BigNumber(p.endBlock));\n    const pool: Pool = {\n      __typename: TypeNames.Pool,\n      id,\n      stakingToken,\n      rewardToken,\n      totalStaked: new BigNumber(p.totalStakingBalance),\n      totalRewards: new BigNumber(p.totalRewardBalance),\n      startBlock: new BigNumber(p.startBlock),\n      endBlock: new BigNumber(p.endBlock),\n      endTimestamp,\n      latestRewardBlock: new BigNumber(p.latestRewardBlock),\n      rewardPerPeriod: new BigNumber(p.rewardPerPeriod),\n      rewardPerToken: new BigNumber(p.rewardPerToken),\n      paidOut: new BigNumber(p.paidOut),\n      fetchTimestamp: this._moment.get().unix()\n    };\n    return pool;\n  }\n\n  protected async toPoolUserInfoAsync(u: ContractPoolUserInfo): Promise<PoolUserInfo> {\n    return {\n      __typename: TypeNames.PoolUserInfo,\n      id: `${u.address}_${u.poolId}`,\n      poolId: u.poolId,\n      account: u.address,\n      stakingBalance: new BigNumber(u.stakingBalance),\n      rewardDebt: new BigNumber(u.rewardDebt)\n    }\n  }\n\n  protected abstract initAsyncProtected(): Promise<void>;\n\n  protected abstract disposeProtected(): void;\n\n  abstract getAccountBalanceAsync(_account: string): Promise<BigNumber>;\n\n  abstract getNetworkBlockHeightAsync(): Promise<BigNumber>;\n\n  abstract getPoolAsync(_id: number, _account?: Maybe<string>): Promise<Pool>;\n\n  abstract getPoolsAsync(_account?: Maybe<string>): Promise<Pool[]>;\n\n  abstract getPoolUserInfoAsync(_poolId: number, _account?: Maybe<string>): Promise<Maybe<PoolUserInfo>>;\n\n  abstract getTotalPoolsAsync(): Promise<number>;\n\n  abstract depositAsync(_id: number, _tokenId: string, _amount: string): Promise<boolean>;\n\n  abstract withdrawAsync(_id: number, _amount: string): Promise<boolean>;\n}","import BigNumber from \"bignumber.js\";\nimport { CommonConstants } from \"../common/constants\";\nimport { CommonUtil } from \"../util/common.util\";\nimport { BrowserFileUtil, FileUtil } from \"../util/file.util\";\nimport { getLogger } from \"../util/logger\";\nimport { ContractPool, ContractPoolUserInfo, Pool, PoolUserInfo } from \"../util/types\";\nimport { BaseDataSource } from \"./base.datasource\";\n\nconst logger = getLogger();\n\nexport class MockDataSource extends BaseDataSource {\n  private readonly _fileUtil: FileUtil;\n  private _pools: Pool[];\n  private _users: PoolUserInfo[];\n  private _networkBlockHeight: BigNumber;\n  private _networkBlockHeightInterval?: NodeJS.Timeout;\n\n  constructor(fileUtil: FileUtil = new BrowserFileUtil()) {\n    super();\n    this._fileUtil = fileUtil;\n    this._pools = [];\n    this._users = [];\n    this._networkBlockHeight = new BigNumber(0);\n    logger.info(\"MockDataSource loaded\")();\n  }\n\n  private initNetworkBlockHeight() {\n    this._networkBlockHeight = new BigNumber(0);\n    this._networkBlockHeightInterval = setInterval(() => {\n      this._networkBlockHeight = this._networkBlockHeight.plus(1);\n      // console.log(this._networkBlockHeight.toString())\n    }, 1000);\n  }\n\n  private async initPoolsAsync(): Promise<void> {\n    let pools = await this._fileUtil.readFileAsync(\"./assets/data/mock_pool_info.json\");\n    pools = JSON.parse(pools);\n    this._pools = [];\n    for (let index = 0; index < pools.length; index++) {\n      const p: ContractPool = pools[index];\n      const pool = await this.toPoolAsync(index, p);\n      pool.apr = await this.getAprAsync(pool);\n      this._pools.push(pool);\n    }\n  }\n\n  async getAprAsync(pool: Pool): Promise<Maybe<BigNumber>> {\n    switch (pool.id) {\n      case 0:\n        return new BigNumber(2.12345678)\n      case 1:\n        return new BigNumber(3.55555555)\n      default:\n        return super.getAprAsync(pool)\n    };\n  }\n\n  private async initPoolUsersAsync(): Promise<void> {\n    let users = await this._fileUtil.readFileAsync(\"./assets/data/mock_user_info.json\");\n    users = JSON.parse(users);\n    this._users = [];\n    for (let index = 0; index < users.length; index++) {\n      const u: ContractPoolUserInfo = users[index];\n      const info = await this.toPoolUserInfoAsync(u);\n      this._users.push(info);\n    }\n  }\n\n  protected async initAsyncProtected(): Promise<void> {\n    logger.info(\"MockDataSource initAsyncProtected\")();\n    this.initNetworkBlockHeight();\n    await this.initPoolsAsync();\n    await this.initPoolUsersAsync();\n  }\n\n  protected disposeProtected(): void {\n    if (this._networkBlockHeightInterval) {\n      clearInterval(this._networkBlockHeightInterval);\n    }\n  }\n\n  async getAccountBalanceAsync(_account: string): Promise<BigNumber> {\n    return new BigNumber(0);\n  }\n\n  async getNetworkBlockHeightAsync(): Promise<BigNumber> {\n    return this._networkBlockHeight;\n  }\n\n  async getPoolAsync(_id: number, _account?: Maybe<string>): Promise<Pool> {\n    await CommonUtil.timeout(CommonUtil.random(100, 500));\n    const pool = this._pools[_id];\n    if (!_account) {\n      return pool;\n    }\n    return {\n      ...pool,\n      userInfo: await this.getPoolUserInfoAsync(_id, _account)\n    }\n  }\n\n  async getPoolsAsync(_account?: Maybe<string>): Promise<Pool[]> {\n    await CommonUtil.timeout(1000);\n    if (!_account) {\n      return this._pools;\n    }\n    const pools = [];\n    for (const p of this._pools) {\n      pools.push(await this.getPoolAsync(p.id, _account))\n    }\n    return pools;\n  }\n\n  async getPoolUserInfoAsync(_poolId: number, _account?: Maybe<string>): Promise<Maybe<PoolUserInfo>> {\n    if (CommonUtil.isNullOrWhitespace(_account)) {\n      return undefined;\n    }\n    return this._users.find(e => e.poolId === _poolId && e.account.toLowerCase() === _account?.toLowerCase());\n  }\n\n  async getTotalPoolsAsync(): Promise<number> {\n    return this._pools.length;\n  }\n\n  private async _updatePoolAsync(pool: Pool): Promise<void> {\n    const blockNumber = await this.getNetworkBlockHeightAsync();\n    const latestBlock = blockNumber < pool.endBlock ? blockNumber : pool.endBlock;\n\n    // rewardPerToken is global, so we only want to update once per timestamp/block.\n    // latestRewardBlock initially set to startBlock, so no updates before that.\n    if (latestBlock <= pool.latestRewardBlock) {\n      return;\n    }\n\n    // if staking balance is 0 over a period, the rewardPerToken should not increase.\n    if (pool.totalStaked.eq(0)) {\n      pool.latestRewardBlock = latestBlock;\n      return;\n    }\n\n    // increase rewardPerToken by reward amount over period since previous reward block.\n    const period = latestBlock.minus(pool.latestRewardBlock);\n    const latestReward = pool.rewardPerPeriod.times(period).times(CommonConstants.REWARD_FACTOR).div(pool.totalStaked);\n    pool.rewardPerToken = pool.rewardPerToken.plus(latestReward);\n\n    pool.latestRewardBlock = latestBlock;\n  }\n\n  async depositAsync(_id: number, _tokenId: string, _amount: string): Promise<boolean> {\n    await CommonUtil.timeout(1000);\n    const pool = this._pools[_id];\n    await this._updatePoolAsync(pool);\n\n    const amount = new BigNumber(_amount);\n    const account = this.getAccount().address;\n    let userInfo = await this.getPoolUserInfoAsync(_id, account);\n    if (userInfo) {\n      // dispense rewards\n      if (userInfo.stakingBalance.gt(0)) {\n        const pendingAmount = userInfo.stakingBalance.times(pool.rewardPerToken).div(CommonConstants.REWARD_FACTOR).minus(userInfo.rewardDebt);\n        pool.paidOut = pool.paidOut.plus(pendingAmount);\n      }\n      // update balances & recompute rewardDebt\n      userInfo.stakingBalance = userInfo.stakingBalance.plus(amount);\n      userInfo.rewardDebt = userInfo.stakingBalance.times(pool.rewardPerToken).div(CommonConstants.REWARD_FACTOR);\n    } else {\n      userInfo = await this.toPoolUserInfoAsync({\n        poolId: _id,\n        address: account,\n        stakingBalance: amount.toString(),\n        rewardDebt: \"0\"\n      });\n      this._users.push(userInfo);\n    }\n    pool.totalStaked = pool.totalStaked.plus(amount);\n    this._emitter.emitPoolDeposit(_id, new BigNumber(_amount), account);\n    return true;\n  }\n\n  async withdrawAsync(_id: number, _amount: string): Promise<boolean> {\n    await CommonUtil.timeout(1000);\n    const pool = this._pools[_id];\n    await this._updatePoolAsync(pool);\n\n    const amount = new BigNumber(_amount);\n    const account = this.getAccount().address;\n    const userInfo = await this.getPoolUserInfoAsync(_id, account);\n    if (!userInfo) {\n      throw new Error(\"Withdraw not possible\")\n    }\n    if (userInfo.stakingBalance.lte(0) || amount.gt(userInfo.stakingBalance)) {\n      throw new Error(\"Insufficient balance\")\n    }\n\n    // dispense rewards\n    const pendingAmount = userInfo.stakingBalance.times(pool.rewardPerToken).div(CommonConstants.REWARD_FACTOR).minus(userInfo.rewardDebt);\n    pool.paidOut = pool.paidOut.plus(pendingAmount);\n\n    // update balances & recompute rewardDebt\n    userInfo.stakingBalance = userInfo.stakingBalance.minus(amount);\n    pool.totalStaked = pool.totalStaked.minus(amount);\n    userInfo.rewardDebt = userInfo.stakingBalance.times(pool.rewardPerToken).div(CommonConstants.REWARD_FACTOR);\n\n    this._emitter.emitPoolWithdraw(_id, new BigNumber(_amount), account);\n    return true;\n  }\n}\n\nconst ds = new MockDataSource();\n\nexport const getMockDataSource = () => {\n  return ds;\n}","export class CachedFunctionCall<T> {\n  private readonly _duration: number;\n  private readonly _callbackFn: () => Promise<T>;\n  private _currentValue?: Maybe<T>;\n  private _lastExecution: number;\n\n  constructor(duration: number, callbackFn: () => Promise<T>) {\n    this._duration = duration;\n    this._callbackFn = callbackFn;\n    this._lastExecution = new Date(0).getTime();\n  }\n\n  private isExpired(): boolean {\n    return new Date().getTime() >= this._lastExecution + this._duration;\n  }\n\n  async getAsync(): Promise<T> {\n    if (!this._currentValue || this.isExpired()) {\n      this._currentValue = await this._callbackFn();\n      this._lastExecution = new Date().getTime();\n    }\n    return this._currentValue;\n  }\n}","import BigNumber from \"bignumber.js\";\nimport { getLogger } from \"../util/logger\";\nimport { Network } from \"../util/types\";\nimport { Networks } from \"./constants\";\n\nconst logger = getLogger();\n\nexport class NetworkManager {\n  private _networkHeight: BigNumber;\n  private _network?: Maybe<Network>;\n  private _setNetworkCallback?: (network?: Maybe<Network>) => void;\n\n  constructor() {\n    this._networkHeight = new BigNumber(0);\n  }\n\n  set networkHeight(height: BigNumber) {\n    this._networkHeight = height;\n  }\n\n  get networkHeight(): BigNumber {\n    return this._networkHeight;\n  }\n\n  set onSetNetworkCallback(cb: (network?: Maybe<Network>) => void) {\n    this._setNetworkCallback = cb;\n  }\n\n  getNetwork(): Maybe<Network> {\n    return this._network;\n  }\n\n  setNetwork(network?: Maybe<Network>): void {\n    this._network = network;\n    if (this._setNetworkCallback) {\n      this._setNetworkCallback(this._network);\n    }\n  }\n\n  getNetworks(): Network[] {\n    try {\n      const ids = process.env.REACT_APP_NETWORKS?.split(\",\").map(e => Number(e));\n      return Networks.filter(e => ids?.includes(e.id))\n    } catch (error) {\n      logger.error(error)\n    }\n    return Networks;\n  }\n}\n\nconst manager = new NetworkManager();\n\nexport const getNetworkManager = () => {\n  return manager;\n}","import BigNumber from \"bignumber.js\";\nimport { getViteClient, ViteClient } from \"../clients/vite.client\";\nimport { CommonConstants, Networks } from \"../common/constants\";\nimport { CachedFunctionCall } from \"../util/cache\";\nimport { CommonUtil } from \"../util/common.util\";\nimport { BrowserFileUtil, FileUtil } from \"../util/file.util\";\nimport { getLogger } from \"../util/logger\";\nimport { Contract, ContractPool, ContractPoolUserInfo, Pool, PoolUserInfo, VmLog, VmLogEvent } from \"../util/types\";\nimport { BaseDataSource } from \"./base.datasource\";\nimport { getNetworkManager } from \"../common/network\";\n\n\nconst logger = getLogger();\n\nexport class ViteDataSource extends BaseDataSource {\n  private readonly _fileUtil: FileUtil;\n  private readonly _client: ViteClient;\n  private readonly _offchainMethods: Map<string, string> = new Map<string, string>();\n  private readonly _cachedNetworkBlockHeight: CachedFunctionCall<number>;\n  private _contract?: Contract;\n  private _listener: any;\n\n  constructor(fileUtil: FileUtil = new BrowserFileUtil()) {\n    super();\n    this._fileUtil = fileUtil;\n    this._client = getViteClient();\n    this._cachedNetworkBlockHeight = new CachedFunctionCall(500, async () => {\n      // prevent function from being called more than once every 500 milliseconds\n      return await this._client.requestAsync(\"ledger_getSnapshotChainHeight\")\n    });\n    logger.info(\"ViteDataSource loaded\")();\n  }\n\n  protected async initAsyncProtected(): Promise<void> {\n    \n\n    const networkManager = getNetworkManager();\n    const currentNetwork = networkManager.getNetwork();\n    // to allow for different mainnet and testnet address/contracts \n    if( currentNetwork === Networks.find(network => network.name === 'MAINNET v0.4') ){\n      logger.info('MAINNET v0.4 ADDRESS CHOSEN.')()\n      const contract = await this._fileUtil.readFileAsync('./assets/contracts/vite_staking_pools_v04.json');\n      this._contract = JSON.parse(contract) as Contract;\n      this._contract.address = CommonConstants.POOLS_CONTRACT_ADDRESS_v04;\n    } else if( currentNetwork === Networks.find(network => network.name === 'MAINNET v0.3') ){\n      logger.info('MAINNET v0.3 ADDRESS CHOSEN.')()\n      const contract = await this._fileUtil.readFileAsync('./assets/contracts/vite_staking_pools_v03.json');\n      this._contract = JSON.parse(contract) as Contract;\n      this._contract.address = CommonConstants.POOLS_CONTRACT_ADDRESS_v03;\n    } else if( currentNetwork === Networks.find(network => network.name === 'MAINNET v0.2') ){\n      logger.info('MAINNET v0.2 ADDRESS CHOSEN.')()\n      const contract = await this._fileUtil.readFileAsync('./assets/contracts/vite_staking_pools_v02.json');\n      this._contract = JSON.parse(contract) as Contract;\n      this._contract.address = CommonConstants.POOLS_CONTRACT_ADDRESS_v02;\n    } else if( currentNetwork === Networks.find(network => network.name === 'MAINNET v0.1') ){\n      logger.info('MAINNET v0.1 ADDRESS CHOSEN.')()\n      const contract = await this._fileUtil.readFileAsync('./assets/contracts/vite_staking_pools_v01.json');\n      this._contract = JSON.parse(contract) as Contract;\n      this._contract.address = CommonConstants.POOLS_CONTRACT_ADDRESS_v01;\n    } else if( currentNetwork === Networks.find(network => network.name === 'TESTNET') ){\n      logger.info('TESTNET ADDRESS CHOSEN.')()\n      const contract = await this._fileUtil.readFileAsync('./assets/contracts/vite_staking_pools_old.json');\n      this._contract = JSON.parse(contract) as Contract;\n      this._contract.address = CommonConstants.POOLS_CONTRACT_ADDRESS_TESTNET;\n    } else {\n      // dumb hack to add contract here to avoid not defined TS errors.\n      const contract = await this._fileUtil.readFileAsync('./assets/contracts/vite_staking_pools_old.json');\n      this._contract = JSON.parse(contract) as Contract;\n      logger.info('Could not set contract address.')()\n    }\n\n    logger.info(`Contract ${this._contract?.contractName} loaded`)();\n    this._listener = await this._client.createAddressListenerAsync(this._contract.address);\n    this._listener.on((results: any[]) => {\n      if (!this._contract?.abi) {\n        logger.info('Could not decode vmlog because contract abi is not defined.')();\n      } else {\n        for (let index = 0; index < results.length; index++) {\n          const result = results[index];\n          const vmLog = this._client.decodeVmLog(result.vmlog, this._contract.abi);\n          logger.info(vmLog ?? result)();\n          if (vmLog) {\n            this.handleVmLogAsync(vmLog);\n          }\n        }\n      }\n    });\n  }\n\n  protected disposeProtected(): void {\n    this.removeAddressListener();\n    this._offchainMethods.clear();\n  }\n\n  private removeAddressListener(): void {\n    if (this._listener) {\n      this._client.removeListener(this._listener);\n    }\n  }\n\n  private get contract(): Contract {\n    if (this._contract?.address === undefined) {\n      throw new Error(\"Contract is not defined.\");\n    } else {\n      return this._contract;\n    }\n  }\n\n  async getAccountBalanceAsync(_account: string): Promise<BigNumber> {\n    try {\n      if (CommonUtil.isNullOrWhitespace(_account)) {\n        return new BigNumber(0);\n      }\n      const result = await this._client.requestAsync(\"ledger_getAccountInfoByAddress\", _account);\n      if (!result?.balanceInfoMap) {\n        return new BigNumber(0);\n      }\n      return new BigNumber(result.balanceInfoMap[CommonConstants.VITE_TOKEN_ID].balance).div(new BigNumber(10).pow(18));\n    } catch (error) {\n      logger.error(error)();\n      return new BigNumber(0);\n    }\n  }\n\n  async getNetworkBlockHeightAsync(): Promise<BigNumber> {\n    try {\n      const result = await this._cachedNetworkBlockHeight.getAsync();\n      return new BigNumber(result);\n    } catch (error) {\n      logger.error(error)();\n      return new BigNumber(0);\n    }\n  }\n\n  async getPoolAsync(_id: number, _account?: Maybe<string>): Promise<Pool> {\n    const result = await this._client.callOffChainMethodAsync(this.contract.address, this.getOffchainMethodAbi(\"getPoolInfo\"), this.contract.offChain, [_id]);\n    const p = this.objectFromEntries(result) as ContractPool;\n    const pool = await this.toPoolAsync(_id, p);\n    pool.apr = await this.getAprAsync(pool);\n    pool.userInfo = await this.getPoolUserInfoAsync(_id, _account);\n    return pool;\n  }\n\n  async getPoolsAsync(_account?: Maybe<string>): Promise<Pool[]> {\n    const amount = await this.getTotalPoolsAsync();\n    const pools = [];\n    for (let index = 0; index < amount; index++) {\n      try {\n        const pool = await this.getPoolAsync(index, _account);\n        pools.push(pool)\n      } catch (error) {\n        logger.error(error)();\n      }\n    }\n    return pools;\n  }\n\n  async getPoolUserInfoAsync(_poolId: number, _account?: Maybe<string>): Promise<Maybe<PoolUserInfo>> {\n    if (!_account || CommonUtil.isNullOrWhitespace(_account)) {\n      return undefined;\n    }\n    const result = await this._client.callOffChainMethodAsync(this.contract.address, this.getOffchainMethodAbi(\"getUserInfo\"), this.contract.offChain, [_poolId, _account]);\n    const u = this.objectFromEntries(result) as ContractPoolUserInfo;\n    const info = await this.toPoolUserInfoAsync(u);\n    return info;\n  }\n\n  async getTotalPoolsAsync(): Promise<number> {\n    const result = await this._client.callOffChainMethodAsync(this.contract.address, this.getOffchainMethodAbi(\"getPoolCount\"), this.contract.offChain, []);\n    return Number(result[0].value);\n  }\n\n  async depositAsync(_id: number, _tokenId: string, _amount: string): Promise<boolean> {\n    const account = this.getAccount();\n    const result = await this._client.callContractAsync(account, \"deposit\", this.contract.abi, [_id], _tokenId, _amount, this.contract.address);\n    await this.handleResponseAsync(account.address, result.height);\n    return true;\n  }\n\n  async withdrawAsync(_id: number, _amount: string): Promise<boolean> {\n    const account = this.getAccount();\n    const result = await this._client.callContractAsync(account, \"withdraw\", this.contract.abi, [_id, _amount], undefined, \"0\", this.contract.address);\n    await this.handleResponseAsync(account.address, result.height);\n    return true;\n  }\n\n  private getOffchainMethodAbi(name: string): any {\n    let result: Maybe<any>\n    if (this._offchainMethods.has(name)) {\n      result = this._offchainMethods.get(name)\n    } else {\n      result = this.contract.abi.find(e => e.type === \"offchain\" && e.name === name)\n      if (result) {\n        this._offchainMethods.set(name, result)\n      }\n    }\n    if (result) {\n      return result\n    } else {\n      throw new Error(`The offchain method '${name}' does not exist.'`)\n    }\n  }\n\n  private handleResponseAsync = async (address: string, height: string) => new Promise<void>((resolve, reject) => {\n    this._client.waitForAccountBlockAsync(address, height).then((result: any) => {\n      if (result?.status === 0) {\n        resolve()\n      } else {\n        reject(result?.statusTxt ?? \"Something went wrong.\")\n      }\n    })\n  })\n\n  private async handleVmLogAsync(vmlog: VmLog): Promise<void> {\n    try {\n      if (vmlog.event === VmLogEvent.Deposit && vmlog.args.addr && vmlog.args.pid && vmlog.args.amount) {\n        this._emitter.emitPoolDeposit(Number(vmlog.args.pid), new BigNumber(vmlog.args.amount), vmlog.args.addr);\n      } else if (vmlog.event === VmLogEvent.Withdraw && vmlog.args.addr && vmlog.args.pid && vmlog.args.amount) {\n        this._emitter.emitPoolWithdraw(Number(vmlog.args.pid), new BigNumber(vmlog.args.amount), vmlog.args.addr);\n      } else {\n        logger.info('Unknown vmlog event.', vmlog)();\n      }\n    } catch (error) {\n      logger.error(error)();\n    }\n  }\n\n  private objectFromEntries = (entries: any) => {\n    return Object.fromEntries(\n      entries.map((entry: any) => {\n        return [entry.name, entry.value];\n      })\n    );\n  }\n}\n\nconst ds = new ViteDataSource();\n\nexport const getViteDataSource = () => {\n  return ds;\n}","import { getViteClient, ViteClient } from \"../clients/vite.client\";\nimport { getMockDataSource, getViteDataSource, IDataSource } from \"../datasources\";\nimport { getLogger } from \"../util/logger\";\nimport { Network } from \"../util/types\";\n\nconst logger = getLogger();\n\nexport class CommonContext {\n  private readonly _vite: ViteClient;\n  private _datasource: IDataSource;\n\n  constructor() {\n    this._vite = getViteClient();\n    this._datasource = getMockDataSource();\n  }\n\n  async initAsync(network: Network): Promise<void> {\n    await this.initViteClientAsync(network);\n    switch (network.id) {\n      case 3:\n        this._datasource = getMockDataSource();\n        break;\n      default:\n        this._datasource = getViteDataSource();\n        break;\n    }\n    await this._datasource.initAsync();\n  }\n\n  dispose(): void {\n    logger.info(\"Disposing CommonContext\")();\n    this._datasource.dispose();\n    this._vite.dispose();\n  }\n\n  get datasource(): IDataSource {\n    return this._datasource;\n  }\n\n  private async initViteClientAsync(network: Network): Promise<void> {\n    try {\n      await this._vite.initAsync(network);\n    } catch (error) {\n      logger.error(error)();\n    }\n  }\n}\n\nconst context = new CommonContext();\n\nexport const getCommonContext = () => {\n  return context;\n}","import { gql } from \"@apollo/client\";\nimport { ApolloContext } from \"../clients/apollo.client\";\n\nexport const DEPOSIT_MUTATION = gql`\nmutation Deposit($id: ID!, $tokenId: String!, $amount: String!) {\n  deposit(id: $id, tokenId: $tokenId, amount: $amount) @client\n}\n`;\n\nexport const WITHDRAW_MUTATION = gql`\nmutation Withdraw($id: ID!, $amount: String!) {\n  withdraw(id: $id, amount: $amount) @client\n}\n`;\n\nexport const PoolMutations = {\n  async deposit(parent: any, { id, tokenId, amount }: any, context: ApolloContext): Promise<boolean> {\n    return context.client.datasource.depositAsync(Number(id), tokenId, amount);\n  },\n  async withdraw(parent: any, { id, amount }: any, context: ApolloContext): Promise<boolean> {\n    return context.client.datasource.withdrawAsync(Number(id), amount);\n  }\n}","import { gql } from '@apollo/client';\nimport BigNumber from 'bignumber.js';\nimport { ApolloContext } from '../clients/apollo.client';\n\nexport const GET_ACCOUNT_BALANCE_QUERY = gql`\n  query GetAccountBalance($account: String) {\n    accountBalance(account: $account) @client\n  }\n`;\n\nexport const AccountQueries = {\n  async accountBalance(parent: any, { account }: any, context: ApolloContext): Promise<BigNumber> {\n    return await context.client.datasource.getAccountBalanceAsync(account);\n  }\n}","import { gql } from '@apollo/client';\nimport BigNumber from 'bignumber.js';\nimport { ApolloContext } from '../clients/apollo.client';\n\nexport const GET_NETWORK_BLOCK_HEIGHT_QUERY = gql`\n  query GetNetworkBlockHeight {\n    networkBlockHeight @client\n  }\n`;\n\nexport const NetworkQueries = {\n  async networkBlockHeight(parent: any, params: any, context: ApolloContext): Promise<BigNumber> {\n    return await context.client.datasource.getNetworkBlockHeightAsync();\n  }\n}","import { gql } from '@apollo/client';\nimport { ApolloContext } from '../clients/apollo.client';\nimport { Token } from '../util/types';\n\nexport const TOKEN_FIELDS = gql`\n  fragment TokenFields on Token {\n    id\n    name\n    symbol\n    originalSymbol\n    decimals\n    iconUrl\n    url\n  }\n`;\n\nexport const GET_TOKEN_QUERY = gql`\n  ${TOKEN_FIELDS}\n  query GetToken($id: ID!) {\n    token(id: $id) @client {\n      ...TokenFields\n    }\n  }\n`;\n\nexport const TokenQueries = {\n  async token(parent: any, { id }: any, context: ApolloContext): Promise<Token> {\n    return context.client.datasource.getTokenAsync(id);\n  }\n}","import { gql } from '@apollo/client';\nimport { ApolloContext } from '../clients/apollo.client';\nimport { Pool, PoolUserInfo } from '../util/types';\nimport { TOKEN_FIELDS } from './token';\n\nexport const POOL_FIELDS = gql`\n  fragment PoolFields on Pool {\n    id\n    stakingToken {\n      ...TokenFields\n    }\n    rewardToken {\n      ...TokenFields\n    }\n    apr\n    totalStaked\n    totalRewards\n    startBlock\n    endBlock\n    endTimestamp\n    latestRewardBlock\n    rewardPerPeriod\n    rewardPerToken\n    paidOut\n    userInfo {\n      ...PoolUserInfoFields\n    }\n  }\n`;\n\nexport const POOL_USER_INFO_FIELDS = gql`\n  fragment PoolUserInfoFields on PoolUserInfo {\n    id\n    poolId\n    account\n    stakingBalance\n    rewardDebt\n  }\n`;\n\nexport const GET_POOL_QUERY = gql`\n  ${TOKEN_FIELDS}\n  ${POOL_USER_INFO_FIELDS}\n  ${POOL_FIELDS}\n  query GetPool($id: ID!, $account: String) {\n    pool(id: $id, account: $account) @client {\n      ...PoolFields\n    }\n  }\n`;\n\nexport const GET_POOLS_QUERY = gql`\n  ${TOKEN_FIELDS}\n  ${POOL_USER_INFO_FIELDS}\n  ${POOL_FIELDS}\n  query GetPools($account: String) {\n    pools(account: $account) @client {\n      ...PoolFields\n    }\n  }\n`;\n\nexport const GET_TOTAL_POOLS_QUERY = gql`\n  query GetTotalPools {\n    totalPools @client\n  }\n`;\n\nexport const GET_POOL_USER_INFO_QUERY = gql`\n  ${POOL_USER_INFO_FIELDS}\n  query GetPoolUserInfo($poolId: Int!, $account: String) {\n    poolUserInfo(poolId: $poolId, account: $account) @client {\n      ...PoolUserInfoFields\n    }\n  }\n`;\n\nexport const PoolQueries = {\n  async pool(parent: any, { id, account }: any, context: ApolloContext): Promise<Pool> {\n    return context.client.datasource.getPoolAsync(Number(id), account);\n  },\n  async pools(parent: any, { account }: any, context: ApolloContext): Promise<Pool[]> {\n    return context.client.datasource.getPoolsAsync(account);\n  },\n  async totalPools(parent: any, params: any, context: ApolloContext): Promise<number> {\n    return await context.client.datasource.getTotalPoolsAsync();\n  },\n  async poolUserInfo(parent: any, { poolId, account }: any, context: ApolloContext): Promise<Maybe<PoolUserInfo>> {\n    return context.client.datasource.getPoolUserInfoAsync(Number(poolId), account);\n  }\n}","import { ApolloClient, InMemoryCache, NormalizedCacheObject } from '@apollo/client';\nimport BigNumber from 'bignumber.js';\nimport { GraphQLScalarType } from 'graphql';\nimport { getCommonContext } from '../contexts/common';\nimport { IDataSource } from '../datasources';\nimport { PoolMutations } from '../mutations';\nimport { NetworkQueries, PoolQueries, TokenQueries } from '../queries';\nimport { AccountQueries } from '../queries/account';\n\nexport type ApolloContext = {\n  cache: InMemoryCache,\n  client: ApolloClientWrapper,\n  clientAwareness: any,\n  getCacheKey: (obj: any) => string | undefined\n}\n\nexport class ApolloClientWrapper extends ApolloClient<NormalizedCacheObject> {\n  get datasource(): IDataSource {\n    return getCommonContext().datasource;\n  }\n}\n\nconst cache: InMemoryCache = new InMemoryCache({\n  typePolicies: {\n    Query: {\n      fields: {\n      }\n    }\n  }\n});\n\nconst bigNumberScalar = new GraphQLScalarType({\n  name: 'BigNumber',\n  description: 'BigNumber custom scalar type',\n  serialize(value: BigNumber) {\n    return value.toString();\n  },\n  parseValue(value: string) {\n    return new BigNumber(value);\n  }\n});\n\nconst resolvers: any = {\n  BigNumber: bigNumberScalar,\n  Query: {\n    ...AccountQueries,\n    ...NetworkQueries,\n    ...PoolQueries,\n    ...TokenQueries\n  },\n  Mutation: {\n    ...PoolMutations\n  }\n};\n\n// https://www.apollographql.com/docs/react/networking/authentication/#header\nconst client = new ApolloClientWrapper({\n  // link: authLink.concat(httpLink),\n  cache: cache,\n  resolvers,\n  headers: {\n    'client-name': process.env.REACT_APP_NAME || 'client',\n    'client-version': process.env.REACT_APP_VERSION || '0',\n  },\n})\n\nexport const getApolloClient = () => {\n  return client;\n}","import * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport Tooltip, { TooltipProps, tooltipClasses } from '@mui/material/Tooltip';\n\nexport const LightTooltip = styled(({ className, ...props }: TooltipProps) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))(({ theme }) => ({\n  [`& .${tooltipClasses.tooltip}`]: {\n    backgroundColor: theme.palette.common.white,\n    color: 'rgba(0, 0, 0, 0.87)',\n    boxShadow: theme.shadows[1],\n    fontSize: 11,\n  },\n}));\n\nexport const BootstrapTooltip = styled(({ className, ...props }: TooltipProps) => (\n  <Tooltip {...props} arrow classes={{ popper: className }} />\n))(({ theme }) => ({\n  [`& .${tooltipClasses.arrow}`]: {\n    color: theme.palette.common.black,\n  },\n  [`& .${tooltipClasses.tooltip}`]: {\n    backgroundColor: theme.palette.common.black,\n  },\n}));\n\nexport const HtmlTooltip = styled(({ className, ...props }: TooltipProps) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))(({ theme }) => ({\n  [`& .${tooltipClasses.tooltip}`]: {\n    backgroundColor: '#f5f5f9',\n    color: 'rgba(0, 0, 0, 0.87)',\n    maxWidth: 220,\n    fontSize: theme.typography.pxToRem(12),\n    border: '1px solid #dadde9',\n  },\n}));","import CropSquareIcon from '@mui/icons-material/CropSquare';\nimport { Box, Chip, Grid, Typography } from '@mui/material';\nimport BigNumber from 'bignumber.js';\nimport { useEffect, useState } from 'react';\nimport { getEmitter } from '../../../../util/emitter.util';\nimport { GlobalEvent } from '../../../../util/types';\nimport { BootstrapTooltip } from '../../../common/components/tooltip';\n\nexport const Footer: React.FC = () => {\n  const [networkBlockHeight, setNetworkBlockHeight] = useState(new BigNumber(0))\n  const [rotated, setRotated] = useState(false)\n  const emitter = getEmitter();\n\n  useEffect(() => {\n    const handleEvent = (height: BigNumber) => {\n      const heightString = height.toString();\n      let heightRef = height;\n      if (heightString.length > 1) {\n        heightRef = new BigNumber(heightString.substr(heightString.length - 1, heightString.length))\n      }\n      setRotated(heightRef.mod(2).eq(0));\n      setNetworkBlockHeight(height);\n    }\n    emitter.on(GlobalEvent.NetworkBlockHeightChanged, handleEvent)\n    return () => {\n      emitter.off(GlobalEvent.NetworkBlockHeightChanged, handleEvent)\n    };\n  }, [emitter]);\n\n  return (\n    <Box sx={{ py: \"10px\", px: \"24px\" }}>\n      <Grid container direction=\"row\" justifyContent=\"flex-end\" alignItems=\"center\" spacing={1}>\n        <Grid item>\n          <BootstrapTooltip title=\"Network block height\" placement=\"top\" arrow>\n            <Typography variant=\"caption\" sx={{ verticalAlign: \"middle\", display: \"inline-flex\" }}>\n              <CropSquareIcon sx={{\n                color: \"gray\",\n                mr: \"2px\",\n                transform: rotated ? \"rotate(45deg)\" : \"rotate(0deg)\",\n                fontSize: \"17px\"\n              }} />\n              {networkBlockHeight.toString()}\n            </Typography>\n          </BootstrapTooltip>\n        </Grid>\n        <Grid item>\n          <BootstrapTooltip title=\"Version\" placement=\"top\" arrow>\n            <Chip label={'v' + process.env.REACT_APP_VERSION} variant=\"outlined\" size=\"small\" />\n          </BootstrapTooltip>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}\n","import React from 'react';\nimport { AppBar, styled, Toolbar, Typography } from '@mui/material';\nimport { CommonConstants } from '../../../../common/constants';\n\nconst Root = styled('div')(\n  ({ theme }) => `\n  flex-grow: 1;\n`,\n);\n\nconst TitleTypography = styled(Typography)(\n  ({ theme }) => `\n  flex-grow: 1;\n  margin-left: 10px !important;\n`,\n);\n\nexport const HeaderLoading: React.FC = (props: any) => {\n  return (\n    <Root>\n      <AppBar position=\"static\">\n        <Toolbar>\n          {/* <img src={\"./logo_white.png\"} alt=\"logo\" width=\"30\" /> */}\n          <TitleTypography variant=\"h6\">\n            {CommonConstants.APP_NAME}\n          </TitleTypography>\n        </Toolbar>\n      </AppBar>\n    </Root>\n  )\n}","import { Container, styled } from '@mui/material';\nimport * as React from 'react';\n\nconst MainScrollStyled = styled('div')(\n  ({ theme }) => `\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n  padding-bottom: 15px;\n  padding-top: 30px;\n  overflow: auto;\n  overflow-x: hidden;\n`,\n);\n\nconst MainScrollInner = styled('div')(\n  ({ theme }) => `\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`,\n);\n\nexport const MainScroll: React.FC = props => {\n  const { children, ...restProps } = props\n\n  return (\n    <MainScrollStyled {...restProps}>\n      <Container maxWidth=\"lg\">\n        <MainScrollInner>{children}</MainScrollInner>\n      </Container>\n    </MainScrollStyled>\n  )\n}\n","import { styled } from '@mui/material';\nimport React from 'react';\n\nconst MainWrapperStyled = styled('div')(\n  ({ theme }) => `\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n`,\n);\n\nexport const MainWrapper: React.FC = props => {\n  const { children, ...restProps } = props\n\n  return <MainWrapperStyled {...restProps}>{children}</MainWrapperStyled>\n}\n","import React, { useState } from 'react';\nimport { getNetworkManager } from '../common/network';\nimport { Network } from '../util/types';\nimport { getWalletManager, SessionWallet, WebWallet } from '../wallet';\n\nexport interface IWeb3Context {\n  setError: (error: Error) => void,\n  error?: Maybe<Error>,\n  wallet?: Maybe<WebWallet | SessionWallet>\n  network?: Maybe<Network>\n}\n\nconst Web3Context = React.createContext<Maybe<IWeb3Context>>(undefined)\n\nexport const useWeb3Context = () => {\n  const context = React.useContext(Web3Context)\n\n  if (!context) {\n    throw new Error('Component rendered outside the provider tree')\n  }\n\n  return context\n}\n\ninterface Props {\n  children?: React.ReactNode\n}\n\nexport const Web3Provider: React.FC<Props> = (props: Props) => {\n  const [error, setError] = useState<Maybe<Error>>(null)\n  const [wallet, setWallet] = useState<Maybe<WebWallet | SessionWallet>>(null)\n  const [network, setNetwork] = useState<Maybe<Network>>(null)\n\n  const walletManager = getWalletManager()\n  walletManager.onSetWalletCallback = setWallet\n\n  const networkManager = getNetworkManager()\n  networkManager.onSetNetworkCallback = setNetwork\n\n  const context: IWeb3Context = {\n    setError,\n    error,\n    wallet,\n    network\n  }\n\n  return (\n    <Web3Context.Provider value={context}>{props.children}</Web3Context.Provider>\n  )\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { Networks } from '../common/constants';\nimport { getNetworkManager } from '../common/network';\nimport { MainLoading } from '../features/main/components/loading';\nimport { getLogger } from '../util/logger';\nimport { Network } from '../util/types';\nimport { getWalletManager } from '../wallet';\nimport { getCommonContext } from './common';\nimport { useWeb3Context } from './web3';\n\nconst logger = getLogger()\n\nexport interface IConnectedWeb3Context {\n  account?: string\n  network?: Maybe<Network>\n  logout: () => void\n}\n\nconst ConnectedWeb3Context = React.createContext<Maybe<IConnectedWeb3Context>>(undefined)\n\n/**\n * This hook can only be used by components under the `ConnectedWeb3` component. Otherwise it will throw.\n */\nexport const useConnectedWeb3Context = () => {\n  const context = React.useContext(ConnectedWeb3Context)\n\n  if (!context) {\n    throw new Error('Component rendered outside the provider tree')\n  }\n\n  return context\n}\n\ninterface Props {\n  children?: React.ReactNode\n}\n\n/**\n * Component used to render components that depend on Web3 being available. These components can then\n * `useConnectedWeb3Context` safely to get web3 stuff without having to null check it.\n */\nexport const ConnectedWeb3: React.FC<Props> = (props: Props) => {\n  const [connection, setConnection] = useState<IConnectedWeb3Context | null>(null)\n  const web3Context = useWeb3Context()\n  const commonContext = getCommonContext()\n\n  const { wallet, network } = web3Context\n\n  useEffect(() => {\n    if (!wallet) {\n      const walletManager = getWalletManager()\n      walletManager.initWallet()\n    }\n  }, [wallet])\n\n  useEffect(() => {\n    if (!network) {\n      const networkManager = getNetworkManager()\n      const networkId = Number(process.env.REACT_APP_DEFAULT_NETWORK ?? \"2\");\n      networkManager.setNetwork(Networks.find(e => e.id === networkId))\n      logger.info(\"Network:\", networkManager.getNetwork())()\n    }\n  }, [network])\n\n  const logout = useCallback(() => {\n    const walletManager = getWalletManager()\n    walletManager.removeWallet()\n    window.location.reload()\n  }, [])\n\n  useEffect(() => {\n    const value = {\n      account: wallet?.active?.address,\n      network,\n      logout\n    }\n\n    logger.info('ConnectedWeb3.account', wallet?.active?.address)()\n\n    const initAsync = async () => {\n      if (network) {\n        logger.info('Init ConnectedWeb3')()\n        try {\n          setConnection(null)\n          await commonContext.initAsync(network)\n          setConnection(value)\n        } catch (error) {\n          logger.error(error)();\n        }\n      }\n    }\n    initAsync()\n    return () => {\n      commonContext.dispose()\n    }\n  }, [wallet, network, logout, commonContext])\n\n  if (!connection) {\n    return MainLoading()\n  }\n\n  const value = {\n    ...connection\n  }\n\n  return (\n    <ConnectedWeb3Context.Provider value={value}>{props.children}</ConnectedWeb3Context.Provider>\n  )\n}","\nimport { Typography } from '@mui/material';\nimport { Footer } from '../../../layout/components/footer';\nimport { HeaderLoading } from '../../../layout/components/header-loading';\nimport { MainScroll } from '../../../layout/components/main-scroll';\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\n\nexport const MainLoading = () => {\n\n  return (\n    <MainWrapper>\n      <HeaderLoading />\n      <MainScroll>\n        <Typography>Loading...</Typography>\n      </MainScroll>\n      <Footer />\n    </MainWrapper>\n  )\n}\n","import { CommonUtil } from './common.util';\n\nexport abstract class FormatUtil {\n  static formatMessage(data: any): string {\n    const defaultMessage = \"Something went wrong.\"\n    if (data) {\n      console.log(data)\n      let message: string\n      if (!CommonUtil.isString(data)) {\n        if (data.message) {\n          message = data.message\n        }\n        else if (data.error?.message) {\n          message = data.error.message\n        } else if (data.graphQLErrors) {\n          if (data.graphQLErrors.length > 0) {\n            message = data.graphQLErrors[0].message\n          } else {\n            message = defaultMessage\n          }\n        } else {\n          message = JSON.stringify(data)\n          if (message === \"{}\") {\n            message = defaultMessage\n          }\n        }\n      } else {\n        message = data\n      }\n      if (message.length > 128) {\n        return message.substr(0, 128) + \"...\"\n      }\n      return message\n    }\n    return defaultMessage\n  }\n}","import { ProviderContext } from \"notistack\";\nimport { FormatUtil } from \"./format.util\";\n\nexport abstract class SnackbarUtil {\n  static snackbar: ProviderContext;\n  static enqueueError(error: any): void {\n    SnackbarUtil.snackbar.enqueueSnackbar(FormatUtil.formatMessage(error));\n  }\n  static enqueueMessage(message: string): void {\n    SnackbarUtil.snackbar.enqueueSnackbar(message);\n  }\n}","import React, { useEffect, useRef } from 'react';\nimport { qrcode, modes, ecLevel } from 'qrcode.es';\n\ninterface Props {\n  text?: string\n}\n\nexport const QrCode: React.FC<Props> = (props: Props) => {\n  const elementRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const defaultOpt = {\n      size: 240,\n      ecLevel: ecLevel.HIGH,\n      minVersion: 4,\n      background: '#fff',\n      mode: modes.DRAW_WITH_IMAGE_BOX,\n      radius: 0,\n      image: process.env.PUBLIC_URL + '/icon.png',\n      mSize: 0.3\n    };\n\n    if (props.text && elementRef.current) {\n      elementRef.current.innerHTML = ''\n      const q = new qrcode(elementRef.current);\n      q.generate(props.text, defaultOpt).then(() => {\n        console.log('QR code generated')\n      });\n    }\n  }, [props.text])\n\n  return (\n    <div ref={elementRef}></div>\n  );\n}\n","import { Dialog, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\nimport { Box } from '@mui/system';\nimport React, { useEffect } from 'react';\nimport { getViteClient } from '../../../../clients/vite.client';\nimport { getEmitter } from '../../../../util/emitter.util';\nimport { GlobalEvent } from '../../../../util/types';\nimport { QrCode } from '../qrcode';\n\ninterface Props {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  onClose: () => void;\n}\n\nexport const LoginDialog: React.FC<Props> = (props: Props) => {\n  const { onClose, open, setOpen } = props;\n  const viteClient = getViteClient();\n  const emitter = getEmitter();\n\n  useEffect(() => {\n    const handleEvent = (open: boolean) => {\n      setOpen(open)\n    }\n    emitter.on(GlobalEvent.ConnectWalletDialog, handleEvent)\n    return () => {\n      emitter.off(GlobalEvent.ConnectWalletDialog, handleEvent)\n    };\n  }, [emitter, setOpen]);\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  if (!viteClient.connector) {\n    return (\n      <>\n      </>\n    )\n  }\n\n  return (\n    <Dialog onClose={handleClose} open={open} maxWidth=\"xs\">\n      <DialogTitle>Connect Wallet</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Scan the QR code via Vite Wallet App\n        </DialogContentText>\n        <Box sx={{ mt: 2, textAlign: \"center\" }}>\n          <QrCode text={viteClient.connector?.uri}></QrCode>\n        </Box>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","import { FormControl, InputLabel, MenuItem, Select, SelectChangeEvent, styled } from '@mui/material';\nimport React, { useState } from 'react';\nimport { getNetworkManager } from '../../../../common/network';\nimport { Network } from '../../../../util/types';\n\nconst NetworksFormControl = styled(FormControl)(\n  ({ theme }) => ({\n    margin: theme.spacing(1),\n    '& .MuiSelect-root': {\n      color: theme.palette.common.white\n    },\n    '& .MuiSvgIcon-root': {\n      color: theme.palette.common.white\n    }\n  }));\n\nexport const NetworkList: React.FC = () => {\n  const networkManager = getNetworkManager()\n  const networks = networkManager.getNetworks()\n  const [network, setNetwork] = useState<Maybe<Network>>(networkManager.getNetwork())\n\n  const handleChange = (event: SelectChangeEvent) => {\n    const selectedNetwork = networks.find(e => e.id.toString() === event.target.value)\n    if (selectedNetwork) {\n      setNetwork(selectedNetwork)\n      networkManager.setNetwork(selectedNetwork)\n    }\n  }\n\n  return (\n    networks.length > 0 ? (\n      <NetworksFormControl variant=\"outlined\" size=\"small\">\n        <InputLabel id=\"select-network-label\"></InputLabel>\n        <Select\n          labelId=\"select-network-label\"\n          id=\"select-network-label\"\n          value={network?.id.toString()}\n          onChange={handleChange}\n        >\n          {networks.map(e => {\n            return (\n              <MenuItem key={e.id.toString()} value={e.id.toString()}>{e.name}</MenuItem>\n            )\n          })}\n        </Select>\n      </NetworksFormControl>\n    ) : (\n      <></>\n    )\n  );\n}","import AccountCircleIcon from '@mui/icons-material/AccountCircle';\nimport { AppBar, Button, Chip, styled, Toolbar, tooltipClasses, Typography } from '@mui/material';\nimport React from 'react';\nimport { CommonConstants } from '../../../../common/constants';\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\nimport { CommonUtil } from '../../../../util/common.util';\nimport { BootstrapTooltip } from '../../../common/components/tooltip';\nimport { LoginDialog } from '../../../main/components/login';\nimport { NetworkList } from '../../../main/components/network-list';\n\nconst Root = styled('div')(\n  ({ theme }) => `\n  flex-grow: 1;\n`);\n\nconst TitleTypography = styled(Typography)(\n  ({ theme }) => `\n  flex-grow: 1;\n  margin-left: 10px !important;\n`);\n\nexport const Header: React.FC = (props: any) => {\n  const context = useConnectedWeb3Context();\n  const [loginOpen, setLoginOpen] = React.useState(false);\n\n  const handleClickLogin = () => {\n    setLoginOpen(true);\n  };\n\n  const handleClickLogout = () => {\n    context.logout();\n  };\n\n  const handleLoginClose = () => {\n    setLoginOpen(false);\n  };\n\n  const truncateAddress = (address?: string) => {\n    return CommonUtil.truncateStringInTheMiddle(address, 10, 5)\n  }\n\n  return (\n    <Root>\n      <AppBar position=\"static\" color=\"primary\">\n        <Toolbar>\n          <a href=\"https://vivafi.org\"><img src={\"./vivalogo_white.svg\"} alt=\"logo\" width=\"64\" /></a>\n          <TitleTypography variant=\"h6\">\n            {CommonConstants.APP_NAME}\n          </TitleTypography>\n          <NetworkList></NetworkList>\n          {context.account ? (\n            <>\n              <BootstrapTooltip sx={{ [`& .${tooltipClasses.tooltip}`]: { maxWidth: \"none\" } }} title={context.account} placement=\"bottom\" arrow>\n                <Chip sx={{ color: \"white\", '& .MuiChip-icon': { color: \"white\" } }} icon={<AccountCircleIcon />} label={truncateAddress(context.account)} variant=\"outlined\" />\n              </BootstrapTooltip >\n              <Button color=\"inherit\" onClick={handleClickLogout}>\n                Logout\n              </Button>\n            </>\n          ) : (\n            <>\n              <Button color=\"inherit\" onClick={handleClickLogin}>\n                Login\n              </Button>\n              <LoginDialog open={loginOpen} setOpen={setLoginOpen} onClose={handleLoginClose}></LoginDialog>\n            </>\n          )}\n        </Toolbar>\n      </AppBar>\n    </Root >\n  )\n}","import React from 'react';\nimport { Box, Paper, Typography } from '@mui/material';\nimport { CommonUtil } from '../../../../util/common.util';\n\ninterface Props {\n  message: string\n  type: 'default' | 'warning'\n  error?: any\n  color?: string\n  backgroundColor?: string\n}\n\nexport const Alert: React.FC<Props> = (props: Props) => {\n  let color = '#000000';\n  let backgroundColor = 'rgba(255, 255, 255, 0.5)';\n\n  switch (props.type) {\n    case 'warning':\n      color = '#611a15';\n      backgroundColor = 'rgba(255, 0, 0, 0.1)';\n      break;\n    default:\n      break;\n  }\n\n  if (props.error) {\n    console.log(CommonUtil.toJsonString(props.error));\n  }\n\n  return (\n    <Paper>\n      <Box sx={{\n        color: props.color ?? color,\n        backgroundColor: props.backgroundColor ?? backgroundColor,\n        padding: '15px',\n        textAlign: 'center'\n      }}>\n        <Typography>{props.message}</Typography>\n      </Box>\n    </Paper>\n  );\n}\n","import { Checkbox, FormControl, FormControlLabel, FormGroup, Grid, InputLabel, MenuItem, Select, SelectChangeEvent, Stack, Switch, TextField, Typography } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { DefaultPoolFilterValues, PoolSortTypes } from \"../../../../common/constants\";\nimport { getEmitter } from \"../../../../util/emitter.util\";\nimport { PoolFilterValues } from \"../../../../util/types\";\n\nexport const PoolFilter: React.FC = () => {\n  const [values, setValues] = useState<PoolFilterValues>(DefaultPoolFilterValues);\n  const emitter = getEmitter();\n\n  const emitEvent = (oldValues: PoolFilterValues, newValues: PoolFilterValues) => {\n    emitter.emitPoolFilterValuesChanged(oldValues, newValues);\n  }\n\n  const handleSortByChange = (event: SelectChangeEvent) => {\n    const newValues = { ...values, sortBy: event.target.value };\n    setValues(newValues);\n    emitEvent(values, newValues);\n  };\n\n  const handleChange = (prop: keyof PoolFilterValues) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValues = { ...values, [prop]: event.target.value };\n    setValues(newValues);\n    emitEvent(values, newValues);\n  };\n\n  const handleCheckedChange = (prop: keyof PoolFilterValues) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValues = { ...values, [prop]: event.target.checked };\n    setValues(newValues);\n    emitEvent(values, newValues);\n  };\n\n  return (\n    <Grid container justifyContent=\"center\" alignItems=\"center\" sx={{ mb: 2 }}>\n      <Grid item xs={12} md={10}>\n        <Grid container>\n          <Grid item xs sx={{ mr: 2 }}>\n            <FormGroup>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                <FormControlLabel control={<Checkbox\n                  checked={values.stakedOnly}\n                  onChange={handleCheckedChange('stakedOnly')} />} label=\"Staked only\" />\n                <Stack direction=\"row\" alignItems=\"center\" >\n                  <Typography>Ended</Typography>\n                  <Switch checked={values.showLive} onChange={handleCheckedChange('showLive')} />\n                  <Typography>Live</Typography>\n                </Stack>\n              </Stack>\n            </FormGroup>\n          </Grid>\n          <Grid item>\n            <FormGroup>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                <FormControl size=\"small\" sx={{ minWidth: \"120px\" }}>\n                  <InputLabel id=\"sortby-select-label\">Sort by</InputLabel>\n                  <Select\n                    labelId=\"sortby-select-label\"\n                    id=\"sortby-select\"\n                    value={values.sortBy}\n                    label=\"Sort by\"\n                    onChange={handleSortByChange}\n                  >\n                    {PoolSortTypes.map(e => (\n                      <MenuItem key={e.type} value={e.type}>{e.name}&nbsp;</MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <TextField\n                  id=\"search\"\n                  value={values.search}\n                  label=\"Search\"\n                  variant=\"outlined\"\n                  size=\"small\"\n                  autoComplete=\"off\"\n                  onChange={handleChange('search')}\n                />\n              </Stack>\n            </FormGroup>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n","import { MomentUtil } from \"../util/moment.util\";\n\nexport class MomentFactory {\n  private readonly _map: Map<string, MomentUtil>\n\n  constructor() {\n    this._map = new Map<string, MomentUtil>();\n  }\n\n  create(locale?: Maybe<string>): MomentUtil {\n    const _locale = locale ?? navigator.language;\n    let util = this._map.get(_locale);\n    if (!util) {\n      util = new MomentUtil(_locale);\n      this._map.set(_locale, util);\n    }\n    return util;\n  }\n}\n\nconst factory = new MomentFactory();\n\nexport const getMomentFactory = (): MomentFactory => {\n  return factory;\n}","import { orderBy, partition } from \"lodash\";\nimport { PoolSortTypes } from \"../common/constants\";\nimport { getMomentFactory } from \"../factories/moment.factory\";\nimport { Pool, PoolFilterValues, PoolSortType } from \"./types\";\n\nexport abstract class FilterUtil {\n  static filterPools(filter: PoolFilterValues, pools?: Maybe<Pool[]>): Maybe<Pool[]> {\n    if (!pools) {\n      return pools;\n    }\n    const moment = getMomentFactory().create();\n    const [closedPools, openPools] = partition(pools, (pool) => pool.endTimestamp >= 0 && moment.get().unix() >= pool.endTimestamp);\n    let filtered: Pool[] = openPools;\n    if (filter.showLive) {\n      if (filter.stakedOnly) {\n        filtered = openPools.filter(e => !!e.userInfo && e.userInfo.stakingBalance.gt(0));\n      } else {\n        filtered = openPools;\n      }\n    } else {\n      if (filter.stakedOnly) {\n        filtered = closedPools.filter(e => !!e.userInfo && e.userInfo.stakingBalance.gt(0));\n      } else {\n        filtered = closedPools;\n      }\n    }\n    const sorted = FilterUtil.sortPools(filter.sortBy, filtered);\n    return FilterUtil.searchPools(filter.search, sorted);\n  }\n\n  static sortPools(sortBy: string, pools?: Maybe<Pool[]>): Maybe<Pool[]> {\n    if (!pools || !sortBy) {\n      return pools;\n    }\n    switch (sortBy) {\n      case PoolSortTypes[PoolSortType.APR].type:\n        return orderBy(\n          pools,\n          (pool: Pool) => pool.apr?.toNumber() ?? 0,\n          'desc',\n        )\n      case PoolSortTypes[PoolSortType.TOTAL_STAKED].type:\n        return orderBy(\n          pools,\n          (pool: Pool) => pool.totalStaked.toNumber(),\n          'desc',\n        )\n      case PoolSortTypes[PoolSortType.DEFAULT].type:\n      default:\n        return pools;\n    }\n  }\n\n  static searchPools(term: string, pools?: Maybe<Pool[]>): Maybe<Pool[]> {\n    if (!pools || !term) {\n      return pools;\n    }\n    const lowerCaseTerm = term.toLowerCase();\n    return pools.filter((pool: Pool) =>\n      pool.rewardToken.originalSymbol.toLowerCase().includes(lowerCaseTerm) || pool.stakingToken.originalSymbol.toLowerCase().includes(lowerCaseTerm)\n    );\n  }\n}","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\nimport BigNumber from \"bignumber.js\";\nimport { getApolloClient } from \"../clients/apollo.client\";\nimport { CommonConstants } from \"../common/constants\";\nimport { getMomentFactory } from \"../factories\";\nimport { DEPOSIT_MUTATION, WITHDRAW_MUTATION } from \"../mutations\";\nimport { Deposit, DepositVariables } from \"../mutations/__generated__/Deposit\";\nimport { Withdraw, WithdrawVariables } from \"../mutations/__generated__/Withdraw\";\nimport { GET_POOL_QUERY, GET_POOL_USER_INFO_QUERY } from \"../queries\";\nimport { GetPool, GetPoolVariables } from \"../queries/__generated__/GetPool\";\nimport { GetPoolUserInfo, GetPoolUserInfoVariables } from \"../queries/__generated__/GetPoolUserInfo\";\nimport { getLogger } from \"../util/logger\";\nimport { MomentUtil } from \"../util/moment.util\";\nimport { Pool } from \"../util/types\";\nimport { getWalletManager, WalletManager } from \"../wallet\";\n\nconst logger = getLogger();\n\nexport class PoolService {\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\n  private readonly _walletManager: WalletManager;\n  private readonly _moment: MomentUtil;\n\n  constructor() {\n    this._apollo = getApolloClient();\n    this._walletManager = getWalletManager();\n    this._moment = getMomentFactory().create();\n  }\n\n  async getAsync(_id: number, _fetchPolicy: FetchPolicy = \"network-only\"): Promise<Maybe<Pool>> {\n    try {\n      const poolQuery = await this._apollo.query<GetPool, GetPoolVariables>({\n        query: GET_POOL_QUERY,\n        variables: {\n          id: _id.toString()\n        },\n        fetchPolicy: _fetchPolicy\n      });\n      const userInfoQuery = await this._apollo.query<GetPoolUserInfo, GetPoolUserInfoVariables>({\n        query: GET_POOL_USER_INFO_QUERY,\n        variables: {\n          poolId: _id,\n          account: this._walletManager.getActiveAccount()?.address\n        },\n        fetchPolicy: _fetchPolicy\n      });\n      const pool = poolQuery.data.pool as unknown as Pool;\n      return {\n        ...pool,\n        userInfo: userInfoQuery.data.poolUserInfo,\n        fetchTimestamp: this._moment.get().unix()\n      }\n    } catch (error) {\n      logger.error(error)();\n    }\n  }\n\n  async depositAsync(_id: number, _tokenId: string, _amount: string): Promise<boolean> {\n    const result = await this._apollo.mutate<Deposit, DepositVariables>({\n      mutation: DEPOSIT_MUTATION,\n      variables: {\n        id: _id.toString(),\n        tokenId: _tokenId,\n        amount: _amount\n      }\n    });\n    return Boolean(result.data?.deposit ?? false);\n  }\n\n  async withdrawAsync(_id: number, _amount: string): Promise<boolean> {\n    const result = await this._apollo.mutate<Withdraw, WithdrawVariables>({\n      mutation: WITHDRAW_MUTATION,\n      variables: {\n        id: _id.toString(),\n        amount: _amount\n      }\n    });\n    return Boolean(result.data?.withdraw ?? false);\n  }\n\n  updateRewardPerToken(pool: Maybe<Pool>, blockNumber: BigNumber): boolean {\n    if (!pool?.userInfo) {\n      return false;\n    }\n\n    const latestBlock = blockNumber.lt(pool.endBlock) ? blockNumber : pool.endBlock;\n\n    // rewardPerToken is global, so we only want to update once per timestamp/block.\n    // latestRewardBlock initially set to startBlock, so no updates before that.\n    if (latestBlock.lte(pool.latestRewardBlock)) {\n      return false;\n    }\n\n    // if staking balance is 0 over a period, the rewardPerToken should not increase.\n    if (pool.totalStaked.eq(new BigNumber(0))) {\n      pool.latestRewardBlock = latestBlock;\n      return true;\n    }\n\n    // increase rewardPerToken by reward amount over period since previous reward block.\n    const period = latestBlock.minus(pool.latestRewardBlock);\n    const latestReward = pool.rewardPerPeriod.times(period).times(CommonConstants.REWARD_FACTOR).div(pool.totalStaked);\n    pool.rewardPerToken = pool.rewardPerToken.plus(latestReward);\n\n    pool.latestRewardBlock = latestBlock;\n    return true;\n  }\n}\n\nconst service = new PoolService();\n\nexport const getPoolService = () => {\n  return service;\n}","import BigNumber from \"bignumber.js\";\nimport { CommonConstants } from \"../common/constants\";\nimport { Pool } from \"./types\";\n\nexport abstract class ViteUtil {\n  static calculateRewardTokens(pool: Maybe<Pool>): BigNumber {\n    if (!pool?.userInfo) {\n      return new BigNumber(0);\n    }\n    return (pool.userInfo.stakingBalance.times(pool.rewardPerToken).div(CommonConstants.REWARD_FACTOR).minus(pool.userInfo.rewardDebt));\n  }\n\n  // need converty if statement and return statement to use bignumber syntax probably\n  static calculateNetRewardTokens(pool: Maybe<Pool>, height: BigNumber): BigNumber {\n    if(!pool || height.lt(pool.startBlock)) {\n      return new BigNumber(0);\n    }\n    if( height.gte(pool.endBlock)){\n      return new BigNumber(pool.totalRewards);\n    }\n    return height.minus(pool.startBlock).div(pool.endBlock.minus(pool.startBlock)).times(pool.totalRewards);\n  }\n\n  static formatBigNumber(bn: BigNumber, tokenDecimals: number, decimals: number): string {\n    return bn.div(new BigNumber(10).pow(tokenDecimals)).decimalPlaces(decimals, BigNumber.ROUND_DOWN).toFormat();\n  }\n}","import { LoadingButton } from '@mui/lab';\nimport React from 'react';\n\ninterface Props {\n  children: React.ReactNode\n  size?: 'small' | 'medium' | 'large'\n  variant?: 'text' | 'outlined' | 'contained'\n  color?: 'inherit' | 'primary' | 'secondary' | 'success' | 'error' | 'info' | 'warning',\n  fullWidth?: boolean\n  autoFocus?: boolean\n  disabled?: boolean\n  callbackFn: () => Promise<void>\n}\n\nexport const ClickOnceButton: React.FC<Props> = (props: Props) => {\n  const [isDisabled, setIsDisabled] = React.useState(false)\n\n  const handleClick = async () => {\n    setIsDisabled(true)\n    try {\n      await props.callbackFn()\n    } catch (error) {\n      console.log(error)\n    }\n    setIsDisabled(false)\n  }\n\n  return (\n    <LoadingButton\n      loading={isDisabled}\n      size={props.size ?? \"small\"}\n      variant={props.variant ?? \"contained\"}\n      color={props.color ?? \"primary\"}\n      fullWidth={props.fullWidth}\n      onClick={handleClick}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </LoadingButton>\n  );\n}\n","import { Skeleton, Typography, Tooltip } from \"@mui/material\";\nimport HelpIcon from '@mui/icons-material/Help';\nimport BigNumber from \"bignumber.js\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { getNetworkManager } from \"../../../../common/network\";\nimport { getMomentFactory } from \"../../../../factories\";\nimport { Pool } from \"../../../../util/types\";\n\ninterface Props {\n  pool: Maybe<Pool>\n}\n\nexport const PoolCountdown: React.FC<Props> = (props: Props) => {\n  const [hasStarted, setHasStarted] = useState<boolean>(false);\n  const [remainingBlocks, setRemainingBlocks] = useState<BigNumber>(new BigNumber(0));\n  const [countdown, setCountdown] = useState<string>(\"\");\n  const moment = useMemo(() => getMomentFactory().create(), []);\n  const networkManager = getNetworkManager();\n\n  useEffect(() => {\n    let interval = setInterval(() => {\n      const height = networkManager.networkHeight;\n      if (props.pool?.endBlock) {\n        let remainingBlocks = new BigNumber(0);\n        if (height.lte(props.pool.startBlock)) {\n          setHasStarted(false);\n          remainingBlocks = props.pool.startBlock.minus(height);\n        } else {\n          setHasStarted(true);\n          remainingBlocks = props.pool.endBlock.minus(height);\n        }\n        if (remainingBlocks.gte(0)) {\n          setRemainingBlocks(remainingBlocks);\n          const duration = moment.getDuration(remainingBlocks.toNumber());\n          if (duration.months() > 0 ){\n            setCountdown(duration.months() + \" months \" + duration.days() + \" days \")\n          } else if (duration.days() > 0) {\n            setCountdown(duration.days() + \" days \" + duration.hours() + \" hours\")\n          } else if (duration.hours() > 0) {\n            setCountdown(duration.hours() + \" hours \" + duration.minutes() + \" minutes\")\n          } else if (duration.minutes() > 0) {\n            setCountdown(duration.minutes() + \" minutes \" + duration.seconds() + \" seconds\")\n          } else {\n            setCountdown(duration.seconds() + \" seconds\")\n          }\n        } else {\n          setRemainingBlocks(new BigNumber(0));\n          setCountdown(\"\");\n        }\n      }\n    }, 500);\n    return () => {\n      clearInterval(interval);\n    }\n  }, [props.pool, moment, networkManager]);\n\n  return (\n    <>\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        {hasStarted ? 'Ends in' : 'Starts in'} &nbsp;<Tooltip title=\"Based on current funds. The pool creator may extend the duration by depositing additional rewards\" placement=\"top\"><HelpIcon fontSize=\"small\"></HelpIcon></Tooltip>\n      </Typography>\n      {!props.pool ? (\n        <Skeleton animation=\"wave\" height={25} width=\"90px\" />\n      ) : (\n        <>\n          {remainingBlocks.gt(0) ? (\n            <Typography variant=\"subtitle1\">\n              {remainingBlocks.toString()} Blocks\n              <Typography variant=\"body2\" color=\"text.secondary\" display=\"inline\" sx={{ ml: 1 }}>\n                {countdown}\n              </Typography>\n            </Typography>\n          ) : (\n            <Typography variant=\"subtitle1\">-</Typography>\n          )}\n        </>\n      )}\n    </>\n  );\n}","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\nimport { BigNumber } from 'bignumber.js';\nimport React, { useEffect, useState } from 'react';\nimport { getPoolService } from '../../../../services/pool.service';\nimport { CommonUtil } from '../../../../util/common.util';\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\nimport { Pool, PoolDialogState } from '../../../../util/types';\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\n\ninterface Props {\n  pool: Pool\n  state: PoolDialogState\n  setState: React.Dispatch<React.SetStateAction<PoolDialogState>>\n}\n\nexport const PoolDepositDialog: React.FC<Props> = (props: Props) => {\n  const [amount, setAmount] = useState<string>(\"\");\n  const [disabled, setDisabled] = useState<boolean>(false);\n  const poolService = getPoolService();\n\n  const changeAmount = (amount: string) => {\n    setAmount(amount);\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new BigNumber(amount).lte(0));\n  }\n\n  useEffect(() => {\n    if (props.state.open) {\n      changeAmount(\"\")\n    }\n  }, [props.state])\n\n  const handleClose = () => {\n    props.setState({\n      ...props.state,\n      open: false\n    })\n  };\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    changeAmount(event.target.value);\n  };\n\n  const handleConfirmAsync = async () => {\n    try {\n      const _amount = new BigNumber(amount).times(new BigNumber(10).pow(props.pool.stakingToken.decimals));\n      await poolService.depositAsync(props.pool.id, props.pool.stakingToken.id, _amount.toString());\n      handleClose();\n    } catch (error) {\n      SnackbarUtil.enqueueError(error);\n    }\n  }\n\n  return (\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\n      <DialogTitle>Stake</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Earn {props.pool.rewardToken.originalSymbol} by staking {props.pool.stakingToken.originalSymbol}.\n        </DialogContentText>\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\n          <InputLabel htmlFor=\"contribute-amount\">Amount</InputLabel>\n          <Input\n            id=\"contribute-amount\"\n            value={amount}\n            onChange={handleChange}\n            type=\"number\"\n            autoFocus\n            startAdornment={<InputAdornment position=\"start\">${props.pool.stakingToken.symbol}</InputAdornment>}\n          />\n        </FormControl>\n        <DialogContentText>\n        <br/>  \n        Note: Pending rewards will be automatically claimed.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose}>Cancel</Button>\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\n          Confirm\n        </ClickOnceButton>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import { ApolloClient, FetchPolicy, NormalizedCacheObject } from \"@apollo/client\";\nimport BigNumber from \"bignumber.js\";\nimport { getApolloClient } from \"../clients/apollo.client\";\nimport { GET_ACCOUNT_BALANCE_QUERY } from \"../queries\";\nimport { GetAccountBalance, GetAccountBalanceVariables } from \"../queries/__generated__/GetAccountBalance\";\nimport { CommonUtil } from \"../util/common.util\";\nimport { getLogger } from \"../util/logger\";\nimport { getWalletManager, WalletManager } from \"../wallet\";\n\nconst logger = getLogger();\n\nexport class AccountService {\n  private readonly _apollo: ApolloClient<NormalizedCacheObject>;\n  private readonly _walletManager: WalletManager;\n\n  constructor() {\n    this._apollo = getApolloClient();\n    this._walletManager = getWalletManager();\n  }\n\n  async getBalanceAsync(_account?: Maybe<string>, _fetchPolicy: FetchPolicy = \"network-only\"): Promise<BigNumber> {\n    try {\n      const account = _account ?? this._walletManager.getActiveAccount()?.address;\n      if (!account || CommonUtil.isNullOrWhitespace(account)) {\n        return new BigNumber(0);\n      }\n      const poolQuery = await this._apollo.query<GetAccountBalance, GetAccountBalanceVariables>({\n        query: GET_ACCOUNT_BALANCE_QUERY,\n        variables: {\n          account\n        },\n        fetchPolicy: _fetchPolicy\n      });\n      const balance = poolQuery.data.accountBalance as unknown as BigNumber;\n      return balance;\n    } catch (error) {\n      logger.error(error)();\n      return new BigNumber(0);\n    }\n  }\n}\n\nconst service = new AccountService();\n\nexport const getAccountService = () => {\n  return service;\n}","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Input, InputAdornment, InputLabel } from '@mui/material';\nimport BigNumber from 'bignumber.js';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { getAccountService } from '../../../../services/account.service';\nimport { getPoolService } from '../../../../services/pool.service';\nimport { CommonUtil } from '../../../../util/common.util';\nimport { getLogger } from '../../../../util/logger';\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\nimport { Pool, PoolDialogState } from '../../../../util/types';\nimport { ViteUtil } from '../../../../util/vite.util';\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\n\nconst logger = getLogger();\n\ninterface Props {\n  pool: Pool\n  state: PoolDialogState\n  setState: React.Dispatch<React.SetStateAction<PoolDialogState>>\n}\n\nexport const PoolWithdrawDialog: React.FC<Props> = (props: Props) => {\n  const getStakedAmount = useCallback(() => {\n    if (props.pool.userInfo?.stakingBalance.gt(0)) {\n      return ViteUtil.formatBigNumber(props.pool.userInfo.stakingBalance, props.pool.stakingToken.decimals, 18).replace(',', '')\n    }\n    return \"\"\n  }, [props.pool])\n\n  const [amount, setAmount] = useState<string>(getStakedAmount());\n  const [disabled, setDisabled] = useState<boolean>(false);\n  const accountService = getAccountService();\n  const poolService = getPoolService();\n\n  const changeAmount = (amount: string) => {\n    setAmount(amount);\n    setDisabled(CommonUtil.isNullOrWhitespace(amount) || new BigNumber(amount).lte(0));\n  }\n\n  useEffect(() => {\n    if (props.state.open) {\n      changeAmount(getStakedAmount())\n    }\n  }, [props.state, getStakedAmount])\n\n  useEffect(() => {\n    async function getBalanceAsync() {\n      const balance = await accountService.getBalanceAsync();\n      logger.info(\"Account balance:\", balance.toString())();\n    }\n    if (props.state.open) {\n      getBalanceAsync();\n    }\n  }, [props.state, accountService])\n\n  const handleClose = () => {\n    props.setState({\n      ...props.state,\n      open: false\n    })\n  };\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    changeAmount(event.target.value);\n  };\n\n  const handleConfirmAsync = async () => {\n    try {\n      const _amount = new BigNumber(amount).times(new BigNumber(10).pow(props.pool.stakingToken.decimals));\n      await poolService.withdrawAsync(props.pool.id, _amount.toString());\n      handleClose();\n    } catch (error) {\n      SnackbarUtil.enqueueError(error);\n    }\n  }\n\n  return (\n    <Dialog onClose={handleClose} open={props.state.open} maxWidth=\"xs\" fullWidth>\n      <DialogTitle>Withdraw</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Enter the {props.pool.stakingToken.originalSymbol} amount to withdraw.\n        </DialogContentText>\n        <FormControl fullWidth sx={{ mt: 2 }} variant=\"standard\" >\n          <InputLabel htmlFor=\"contribute-amount\">Amount</InputLabel>\n          <Input\n            id=\"contribute-amount\"\n            value={amount}\n            onChange={handleChange}\n            type=\"number\"\n            autoFocus\n            startAdornment={<InputAdornment position=\"start\">${props.pool.stakingToken.symbol}</InputAdornment>}\n          />\n        </FormControl>\n        <DialogContentText>\n        <br/>  \n        Note: Pending rewards will be automatically claimed.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose}>Cancel</Button>\n        <ClickOnceButton size=\"medium\" color=\"primary\" callbackFn={handleConfirmAsync} disabled={disabled}>\n          Confirm\n        </ClickOnceButton>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import * as React from 'react';\nimport { Pool, PoolDialogState, PoolDialogType } from '../../../../util/types';\nimport { PoolDepositDialog } from '../dialog-deposit';\nimport { PoolWithdrawDialog } from '../dialog-withdraw';\n\ninterface Props {\n  pool: Pool\n  state: PoolDialogState\n  setState: React.Dispatch<React.SetStateAction<PoolDialogState>>\n}\n\nexport const PoolDialog: React.FC<Props> = (props: Props) => {\n  switch (props.state.type) {\n    case PoolDialogType.WITHDRAW:\n      return <PoolWithdrawDialog pool={props.pool} state={props.state} setState={props.setState}></PoolWithdrawDialog>\n    case PoolDialogType.DEPOSIT:\n      return <PoolDepositDialog pool={props.pool} state={props.state} setState={props.setState}></PoolDepositDialog>\n    default:\n      return <></>\n  }\n}\n","import BigNumber from \"bignumber.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { getNetworkManager } from \"../../../../common/network\";\nimport { getPoolService } from \"../../../../services/pool.service\";\nimport { Pool } from \"../../../../util/types\";\nimport { ViteUtil } from \"../../../../util/vite.util\";\n\ninterface Props {\n  pool: Maybe<Pool>\n  account?: Maybe<string>\n  decimals: number\n  setCanClaim?: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nexport const Rewards: React.FC<Props> = (props: Props) => {\n  const [pool, setPool] = useState<Maybe<Pool>>(props.pool);\n  const [rewardTokens, setRewardTokens] = useState<BigNumber>(new BigNumber(0));\n  const poolService = getPoolService();\n  const networkManager = getNetworkManager();\n\n  useEffect(() => {\n    setPool(props.pool);\n  }, [props.pool]);\n\n  useEffect(() => {\n    if (pool) {\n      const newRewardTokens = ViteUtil.calculateRewardTokens(pool);\n      setRewardTokens(newRewardTokens);\n      if (props.setCanClaim) {\n        props.setCanClaim(!!props.pool && !!props.account && newRewardTokens.gt(0));\n      }\n    } else {\n      setRewardTokens(new BigNumber(0));\n      if (props.setCanClaim) {\n        props.setCanClaim(false);\n      }\n    }\n  }, [pool, props]);\n\n  useEffect(() => {\n    if (pool) {\n      const newRewardTokens = ViteUtil.calculateRewardTokens(pool);\n      setRewardTokens(newRewardTokens);\n      if (props.setCanClaim) {\n        props.setCanClaim(!!props.pool && !!props.account && newRewardTokens.gt(0));\n      }\n    } else {\n      setRewardTokens(new BigNumber(0));\n      if (props.setCanClaim) {\n        props.setCanClaim(false);\n      }\n    }\n  }, [pool, props]);\n\n  useEffect(() => {\n    let interval = setInterval(() => {\n      const height = networkManager.networkHeight;\n      if (pool) {\n        const updated = poolService.updateRewardPerToken(pool, height);\n        if (updated) {\n          const newPool: Pool = {\n            ...pool\n          }\n          setPool(newPool);\n        }\n      }\n    }, 3000);\n    return () => {\n      clearInterval(interval);\n    }\n  }, [pool, poolService, networkManager]);\n\n  const showRewardTokens = (decimals: number): string => {\n    if (!pool) {\n      return \"0\";\n    }\n    return ViteUtil.formatBigNumber(rewardTokens, pool.rewardToken.decimals, decimals);\n  }\n\n  return (\n    <>\n      {showRewardTokens(props.decimals)}\n    </>\n  );\n}","import BigNumber from \"bignumber.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { getNetworkManager } from \"../../../../common/network\";\n//import { getPoolService } from \"../../../../services/pool.service\";\nimport { Pool } from \"../../../../util/types\";\nimport { ViteUtil } from \"../../../../util/vite.util\";\n\ninterface Props {\n  pool: Maybe<Pool>\n  account?: Maybe<string>\n  decimals: number\n}\n\nexport const NetRewards: React.FC<Props> = (props: Props) => {\n  const [pool, setPool] = useState<Maybe<Pool>>(props.pool);\n  const [rewardTokens, setRewardTokens] = useState<BigNumber>(new BigNumber(0));\n  //const poolService = getPoolService();\n  const networkManager = getNetworkManager();\n\n  useEffect(() => {\n    setPool(props.pool);\n  }, [props.pool]);\n\n  useEffect(() => {\n    if (pool) {\n      const height = networkManager.networkHeight;\n      const newRewardTokens = ViteUtil.calculateNetRewardTokens(pool, height);\n      setRewardTokens(newRewardTokens);\n    } else {\n      setRewardTokens(new BigNumber(0));\n    }\n  }, [pool, networkManager, props]);\n\n  /*\n  useEffect(() => {\n    if (pool) {\n      const height = networkManager.networkHeight;\n      const newRewardTokens = ViteUtil.calculateNetRewardTokens(pool, height);\n      setRewardTokens(newRewardTokens);\n\n    } else {\n      setRewardTokens(new BigNumber(0));\n\n    }\n  }, [pool, networkManager, props]);\n*/\n  \n  useEffect(() => {\n    let interval = setInterval(() => {\n\n      if (pool) {\n        const height = networkManager.networkHeight;\n        const newRewardTokens = ViteUtil.calculateNetRewardTokens(pool, height);\n        setRewardTokens(newRewardTokens);\n      } else {\n        setRewardTokens(new BigNumber(0));\n      }\n\n    }, 3000);\n    return () => {\n      clearInterval(interval);\n    }\n  }, [pool, networkManager]);\n\n  const showRewardTokens = (decimals: number): string => {\n    if (!pool) {\n      return \"0\";\n    }\n    return ViteUtil.formatBigNumber(rewardTokens, pool.rewardToken.decimals, decimals);\n  }\n\n  return (\n    <>\n      {showRewardTokens(props.decimals)}\n    </>\n  );\n}","import { Avatar, Badge, Grid, Skeleton, styled, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport { getCoinUtil } from \"../../../../util/coin.util\";\nimport { Pool } from \"../../../../util/types\";\n\ninterface Props {\n  loading: boolean\n  pool: Maybe<Pool>\n}\n\nexport const Tokens: React.FC<Props> = (props: Props) => {\n  const BigCoin = styled(Avatar)(({ theme }) => ({\n    width: 50,\n    height: 50,\n    backgroundColor: \"white\",\n    border: \"1px solid black\"\n  }));\n  const SmallCoin = styled(Avatar)(({ theme }) => ({\n    width: 30,\n    height: 30,\n    backgroundColor: \"white\",\n    border: `1px solid ${theme.palette.grey[600]}`\n  }));\n  const coinUtil = getCoinUtil();\n\n  return (\n    <Grid container alignItems=\"center\" spacing={2}>\n      <Grid item>\n        <Badge\n          overlap=\"circular\"\n          anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n          badgeContent={\n            <SmallCoin alt={props.pool?.stakingToken.originalSymbol} src={coinUtil.mapIconUrl(props.pool?.stakingToken.iconUrl)} />\n          }\n        >\n          <BigCoin alt={props.pool?.rewardToken.originalSymbol} src={coinUtil.mapIconUrl(props.pool?.rewardToken.iconUrl)} />\n        </Badge>\n      </Grid>\n      <Grid item>\n        {props.loading ? (\n          <>\n            <Skeleton animation=\"wave\" height={25} width=\"70px\" />\n            <Skeleton animation=\"wave\" height={25} width=\"90px\" />\n          </>\n        ) : (\n          <>\n            <Typography variant=\"subtitle1\">\n              Earn {props.pool?.rewardToken.originalSymbol}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Stake {props.pool?.stakingToken.originalSymbol}\n            </Typography>\n          </>\n        )}\n      </Grid>\n    </Grid >\n  );\n}","import ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport HelpIcon from '@mui/icons-material/Help';\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Button, Grid, Link, Paper, Skeleton, styled, Tooltip, Typography, Alert } from \"@mui/material\";\nimport React, { useEffect, useState } from \"react\";\nimport { getNetworkManager } from '../../../../common/network';\nimport { getPoolService } from '../../../../services/pool.service';\nimport { getEmitter } from '../../../../util/emitter.util';\nimport { getLogger } from \"../../../../util/logger\";\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\nimport { Pool, PoolDialogState, PoolDialogType } from \"../../../../util/types\";\nimport { ViteUtil } from \"../../../../util/vite.util\";\nimport { ClickOnceButton } from '../../../common/components/click-once-button';\nimport { PoolCountdown } from \"../countdown\";\nimport { PoolDialog } from \"../dialog\";\nimport { Rewards } from '../rewards';\nimport { NetRewards } from '../netrewards';\nimport { Tokens } from \"../tokens\";\nimport BigNumber from 'bignumber.js';\n\nconst logger = getLogger()\n\nconst TransparentPaper = styled(Paper)(\n  ({ theme }) => ({\n    padding: theme.spacing(2),\n    paddingTop: theme.spacing(1),\n    backgroundColor: \"transparent\"\n  }));\n\ninterface Props {\n  account?: Maybe<string>\n  pool?: Maybe<Pool>\n}\n\nexport const PoolListItem: React.FC<Props> = (props: Props) => {\n  const [dialogState, setDialogState] = useState<PoolDialogState>({\n    type: PoolDialogType.DEPOSIT,\n    open: false\n  });\n  const [canStake, setCanStake] = useState<boolean>(false);\n  const [canClaim, setCanClaim] = useState<boolean>(false);\n  const [canWithdraw, setCanWithdraw] = useState<boolean>(false);\n  const emitter = getEmitter();\n  const poolService = getPoolService();\n  const networkManager = getNetworkManager();\n  const network = networkManager.getNetwork();\n\n  useEffect(() => {\n    if (props.pool) {\n      logger.info(`Pool loaded: ${props.pool?.id}`)();\n      setCanWithdraw(!!props.pool && !!props.account && (props.pool.userInfo?.stakingBalance.gt(0) ?? false));\n    } else {\n      setCanWithdraw(false);\n    }\n  }, [props.pool, props.account]);\n\n  useEffect(() => {\n    let interval = setInterval(() => {\n      //setCanStake(false); // quick fix to prevent more staking.\n      const tempnetwork = networkManager.getNetwork();\n      setCanStake(!!props.pool && !!props.account && !!tempnetwork && tempnetwork.name !== \"MAINNET v0.2\" );\n    }, 500);\n    return () => {\n      clearInterval(interval);\n    }\n  }, [props.pool, props.account, networkManager]);\n\n  const showApr = (): Maybe<string> => {\n    if (!props.pool || !props.pool.apr) {\n      return \"-\";\n    }\n    if (props.pool.apr.eq(new BigNumber(0))){\n      return \"-\";\n    }\n    return props.pool.apr.toFormat(2) + '%';\n  }\n\n  const showTotalStaked = (): string => {\n    if (!props.pool) {\n      return \"0\";\n    }\n    return ViteUtil.formatBigNumber(props.pool.totalStaked, props.pool.stakingToken.decimals, 2);\n  }\n\n  const showStaked = (decimals: number): string => {\n    if (!props.pool?.userInfo) {\n      return \"0\";\n    }\n    return ViteUtil.formatBigNumber(props.pool.userInfo.stakingBalance, props.pool.stakingToken.decimals, decimals);\n  }\n\n  const handleConnectWallet = () => {\n    emitter.emitConnectWalletDialog(true);\n  }\n\n  const handleClickDeposit = () => {\n    setDialogState({\n      ...dialogState,\n      type: PoolDialogType.DEPOSIT,\n      open: true\n    })\n  }\n\n  const handleClickWithdraw = () => {\n    setDialogState({\n      ...dialogState,\n      type: PoolDialogType.WITHDRAW,\n      open: true\n    })\n  }\n\n  const handleClickClaimAsync = async () => {\n    try {\n      if (props.pool) {\n        await poolService.withdrawAsync(props.pool.id, \"0\");\n      }\n    } catch (error) {\n      SnackbarUtil.enqueueError(error);\n    }\n  }\n\n  return (\n    <>\n      <Accordion defaultExpanded>\n        <AccordionSummary sx={{ backgroundColor: \"rgba(217, 217, 217, 0.1)\" }} expandIcon={<ExpandMoreIcon />}>\n          <Grid container justifyContent=\"center\" alignItems=\"center\" spacing={2}>\n            <Grid item>\n              <Tokens loading={!props.pool} pool={props.pool}></Tokens>\n            </Grid>\n            <Grid item xs container alignItems=\"center\">\n              <Grid item xs container justifyContent=\"space-evenly\" direction=\"row\" spacing={2}>\n                <Grid item>\n                  {!props.pool ? (\n                    <>\n                      <Skeleton animation=\"wave\" height={25} width=\"90px\" />\n                      <Skeleton animation=\"wave\" height={25} width=\"70px\" />\n                    </>\n                  ) : (\n                    <>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Total {props.pool?.rewardToken.originalSymbol} earned&nbsp;<Tooltip title=\"Total earned by all users since pool start\" placement=\"top\"><HelpIcon fontSize=\"small\"></HelpIcon></Tooltip>\n                      </Typography>\n                      <Typography variant=\"subtitle1\">\n                        <NetRewards pool={props.pool} decimals={4}></NetRewards>\n                      </Typography>\n                    </>\n                  )}\n                </Grid>\n                <Grid item>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    APR&nbsp;<Tooltip title=\"Annual Percentage Rate - APR is only shown for coins with a known value\" placement=\"top\"><HelpIcon fontSize=\"small\"></HelpIcon></Tooltip>\n                  </Typography>\n                  {!props.pool ? (\n                    <Skeleton animation=\"wave\" height={25} width=\"60px\" />\n                  ) : (\n                    <Typography variant=\"subtitle1\">\n                      {props.pool.apr ? (\n                        <>\n                          {showApr()}\n                        </>\n                      ) : (\n                        <>\n                          -\n                        </>\n                      )}\n                    </Typography>\n                  )}\n                </Grid>\n                <Grid item>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Total {props.pool?.stakingToken.originalSymbol} staked&nbsp;<Tooltip title=\"Total staked by all users\" placement=\"top\"><HelpIcon fontSize=\"small\"></HelpIcon></Tooltip>\n                  </Typography>\n                  {!props.pool ? (\n                    <Skeleton animation=\"wave\" height={25} width=\"120px\" />\n                  ) : (\n                    <Typography variant=\"subtitle1\">\n                      {showTotalStaked()}\n                    </Typography>\n                  )}\n                </Grid>\n                <Grid item>\n                  <PoolCountdown pool={props.pool} />\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </AccordionSummary>\n        { network?.name === \"MAINNET v0.2\" ? (<Alert severity=\"error\">For the safety of your assets, unstake from these pools and use v0.3 pools.</Alert>) : null }\n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 3 ? (<Alert severity=\"warning\">This pool is broken and wont provide rewards, <strong>UNSTAKE</strong> and use the other EARN BTC pool! See Discord for more info.</Alert>) : null }\n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 8 ? (<Alert severity=\"success\">Use this <strong>NEW</strong> pool for BTC rewards!</Alert>) : null }\n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 10 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 30 days)</strong>.</Alert>) : null }\n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 11 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 90 days)</strong>.</Alert>) : null }\n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 18 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 30 days)</strong>.</Alert>) : null }\n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 19 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 30 days)</strong>.</Alert>) : null }  \n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 20 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits are locked for <strong>24 hours</strong> after depositing.</Alert>) : null }\n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 28 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 15 days)</strong>.</Alert>) : null }       \n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 29 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 60 days)</strong>.</Alert>) : null }   \n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 29 ? (<Alert severity=\"info\">This pool has a deposit <strong>MINIMUM</strong> of 1 million Viva.</Alert>) : null }           \n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 30 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 30 days)</strong>.</Alert>) : null }   \n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 30 ? (<Alert severity=\"info\">This pool has a deposit <strong>MINIMUM</strong> of 500,000 Viva.</Alert>) : null }   \n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 35 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 15 days)</strong>.</Alert>) : null }   \n        { network?.name === \"MAINNET v0.4\" && props?.pool?.id === 36 ? (<Alert severity=\"info\">This is a <strong>LOCKED</strong> pool. Deposits and rewards cannot be withdrawn until the the pool ends <strong>(max 15 days)</strong>.</Alert>) : null }   \n\n\n        <AccordionDetails sx={{ backgroundColor: \"rgba(217, 217, 217, 0.3)\", pt: 2 }}>\n          <Grid container justifyContent=\"center\" alignItems=\"center\" spacing={2}>\n            <Grid item sx={{ mr: 4 }}>\n              <Link underline=\"none\" href={props.pool?.rewardToken.url ?? \"#\"} target=\"_blank\" sx={{ cursor: \"pointer\", display: \"flex\", alignItems: \"center\" }}>\n                View {props.pool?.rewardToken.originalSymbol}&nbsp;<OpenInNewIcon fontSize=\"small\"></OpenInNewIcon>\n              </Link>\n              <Link underline=\"none\" href={props.pool?.stakingToken.url ?? \"#\"} target=\"_blank\" sx={{ cursor: \"pointer\", display: \"flex\", alignItems: \"center\" }}>\n                View {props.pool?.stakingToken.originalSymbol}&nbsp;<OpenInNewIcon fontSize=\"small\"></OpenInNewIcon>\n              </Link>\n            </Grid>\n            <Grid item xs container alignItems=\"center\">\n              <Grid item container justifyContent=\"space-evenly\" direction=\"row\" spacing={2}>\n                <Grid item xs={12} md={6} lg={5} zeroMinWidth>\n                  <TransparentPaper variant=\"outlined\">\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {props.pool?.rewardToken.originalSymbol} earned since last claim\n                    </Typography>\n                    <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                      {!props.pool ? (\n                        <Skeleton animation=\"wave\" height={30} width=\"100%\" />\n                      ) : (\n                        <Typography sx={{ width: \"100%\" }} noWrap>\n                          <Rewards pool={props.pool} decimals={18} account={props.account} setCanClaim={setCanClaim}></Rewards>\n                        </Typography>\n                      )}\n                      <Box sx={{ ml: 2 }} >\n                        <ClickOnceButton variant=\"contained\" size=\"large\" callbackFn={handleClickClaimAsync} disabled={!canClaim}>\n                          Claim\n                        </ClickOnceButton>\n                      </Box>\n                    </Box>\n                  </TransparentPaper>\n                </Grid>\n                {!props.account ? (\n                  <Grid item xs={12} md={6} lg={5}>\n                    <TransparentPaper variant=\"outlined\">\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Start staking\n                      </Typography>\n                      <Button variant=\"contained\" size=\"large\" fullWidth disabled={!props.pool} onClick={handleConnectWallet}>Connect wallet</Button>\n                    </TransparentPaper>\n                  </Grid>\n                ) : (\n                  <>\n                    <Grid item xs={12} md={6} lg={5} zeroMinWidth>\n                      <TransparentPaper variant=\"outlined\">\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                        {props.pool?.stakingToken.originalSymbol} Staked\n                        </Typography>\n                        <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                          {!props.pool ? (\n                            <Skeleton animation=\"wave\" height={30} width=\"100%\" />\n                          ) : (\n                            <Typography sx={{ width: \"100%\" }} noWrap>\n                              {showStaked(18)}\n                            </Typography>\n                          )}\n                          <Tooltip\n                          title=\"+ automatically claim pending rewards\"\n                          placement=\"bottom\">\n                          <Button variant=\"contained\" size=\"large\" sx={{ ml: 2 }} onClick={handleClickWithdraw} disabled={!canWithdraw}>\n                            Withdraw\n                          </Button>\n                          </Tooltip>\n                        </Box>\n                      </TransparentPaper>\n                    </Grid>\n                    <Grid item xs={12} md sx={{ display: \"flex\", alignItems: \"center\" }}>\n                      <Tooltip\n                          title=\"+ automatically claim pending rewards\"\n                          placement=\"bottom\">\n                      <Button variant=\"contained\" size=\"large\" fullWidth onClick={handleClickDeposit} disabled={!canStake}>\n                        Stake\n                      </Button>\n                      </Tooltip>\n                    </Grid>\n                  </>\n                )}\n              </Grid>\n            </Grid>\n          </Grid>\n        </AccordionDetails>\n      </Accordion>\n      {props.pool && (\n        <PoolDialog pool={props.pool} state={dialogState} setState={setDialogState}></PoolDialog>\n      )}\n    </>\n  );\n}","import { Grid } from \"@mui/material\";\nimport BigNumber from \"bignumber.js\";\nimport { useEffect, useState } from \"react\";\nimport { DefaultPoolFilterValues } from \"../../../../common/constants\";\nimport { getCommonContext } from \"../../../../contexts/common\";\nimport { getEmitter } from \"../../../../util/emitter.util\";\nimport { FilterUtil } from \"../../../../util/filter.util\";\nimport { getLogger } from \"../../../../util/logger\";\nimport { GlobalEvent, Pool, PoolFilterValues } from \"../../../../util/types\";\nimport { Alert } from \"../../../common/components/alert\";\nimport { PoolListItem } from \"../list-item\";\n\nconst logger = getLogger()\n\ninterface Props {\n  account?: Maybe<string>\n  pools?: Maybe<Pool[]>\n}\n\nexport const PoolList: React.FC<Props> = (props: Props) => {\n  const [isLoading, setIsLoading] = useState<boolean>(true)\n  const [allPools, setAllPools] = useState<Maybe<Pool[]>>(props.pools)\n  const [pools, setPools] = useState<Maybe<Pool[]>>(props.pools)\n  const [filter, setFilter] = useState<PoolFilterValues>(DefaultPoolFilterValues)\n  const emitter = getEmitter()\n  const commonContext = getCommonContext()\n\n  useEffect(() => {\n    if (props.pools) {\n      setIsLoading(false)\n    } else {\n      setIsLoading(true)\n    }\n    setAllPools(props.pools)\n  }, [props.pools])\n\n  useEffect(() => {\n    setPools(FilterUtil.filterPools(filter, allPools))\n  }, [allPools, filter])\n\n  useEffect(() => {\n    const handleEvent = (oldValues: PoolFilterValues, newValues: PoolFilterValues) => {\n      setFilter(newValues)\n    }\n    emitter.on(GlobalEvent.PoolFilterValuesChanged, handleEvent)\n    return () => {\n      logger.info('emitter.off', GlobalEvent.PoolFilterValuesChanged)()\n      emitter.off(GlobalEvent.PoolFilterValuesChanged, handleEvent)\n    };\n  }, [emitter])\n\n  useEffect(() => {\n    const replacePool = (pool: Pool) => {\n      if (allPools && pool) {\n        const index = allPools.findIndex(e => e.id === pool.id)\n        if (index >= 0) {\n          // Replace existing\n          const updatedPools = [...allPools]\n          updatedPools[index] = {\n            ...pool\n          }\n          setAllPools(updatedPools)\n        } else {\n          // Prepend to existing pools\n          setAllPools([pool, ...allPools])\n        }\n      }\n    }\n    const handlePoolEvent = async (id: number, amount: BigNumber, account: string) => {\n      const pool = await commonContext.datasource.getPoolAsync(id, props.account)\n      replacePool(pool)\n    }\n    emitter.on(GlobalEvent.PoolDeposit, handlePoolEvent)\n    emitter.on(GlobalEvent.PoolWithdraw, handlePoolEvent)\n    return () => {\n      logger.info('emitter.off', GlobalEvent.PoolDeposit)()\n      emitter.off(GlobalEvent.PoolDeposit, handlePoolEvent)\n      emitter.off(GlobalEvent.PoolWithdraw, handlePoolEvent)\n    };\n  }, [emitter, allPools, commonContext, props.account])\n\n  if (!isLoading && pools && pools.length <= 0) {\n    return (\n      <Grid item key=\"1\" xs={12} md={6}>\n        <Alert message=\"No pools found.\" type=\"default\"></Alert>\n      </Grid>\n    );\n  }\n\n  return (\n    <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" spacing={3}>\n      {isLoading ? (\n        <>\n          {[0, 1, 2].map((index: number) => (\n            <Grid item key={index} xs={12} md={10}>\n              <PoolListItem></PoolListItem>\n            </Grid>\n          ))}\n        </>\n      ) : (\n        <>\n          {pools?.map((p: Pool) => (\n            <Grid item key={p.id} xs={12} md={10}>\n              <PoolListItem account={props.account} pool={p}></PoolListItem>\n            </Grid>\n          ))}\n        </>\n      )}\n    </Grid>\n  );\n}\n","import React from 'react';\nimport {Button, styled, Typography, Alert } from '@mui/material';\n\nconst HeroContent = styled('div')({\n  background: 'url(\"./watermelon.jpeg\") left center',\n  boxShadow: '0px 0px 20px #AAA',\n  borderRadius: '4px',\n  height: 240,\n  width: '100%',\n  padding: 40,\n  margin: 0\n});\n\nexport const Hero = () => {\n  return (\n    <>\n      { <Alert severity=\"success\">Welcome to our v0.4 pools! Earn BTC, ETH, NANO and more! Also, Viva is now listed, <a href=\"https://x.vite.net/trade?symbol=VIVA-000_VITE\">buy Viva at ViteX.net!</a> </Alert> }\n      <HeroContent>\n          <Typography variant=\"h4\" align=\"left\" color=\"textSecondary\" paragraph>\n            Juicy Rewards!\n          </Typography>\n          <Typography align=\"left\" fontSize=\"large\" color=\"textSecondary\" maxWidth=\"sm\" paragraph>\n            Stake in Viva pools to earn rewards! No fees, instant staking! <br/>\n            A healthy way to earn with your crypto.\n          </Typography>\n        <Button variant=\"contained\" color=\"primary\" href=\"https://docs.vivafi.org/mainnet-tutorial\">\n          Tutorial\n        </Button>\n      </HeroContent>\n    </>\n  );\n}\n","import { useQuery } from '@apollo/client';\nimport { Container, Grid } from '@mui/material';\nimport React from 'react';\nimport { useConnectedWeb3Context } from '../../../../contexts/connectedWeb3';\nimport { GET_POOLS_QUERY } from '../../../../queries';\nimport { GetPools, GetPoolsVariables } from '../../../../queries/__generated__/GetPools';\nimport { Pool } from '../../../../util/types';\nimport { Alert } from '../../../common/components/alert';\nimport { PoolFilter } from '../filter';\nimport { PoolList } from '../list';\nimport { Hero } from '../hero'\n\nexport const Pools: React.FC = () => {\n  const context = useConnectedWeb3Context();\n  const poolQuery = useQuery<GetPools, GetPoolsVariables>(GET_POOLS_QUERY, {\n    variables: {\n      account: context.account\n    },\n    fetchPolicy: 'network-only'\n  });\n\n  const error = poolQuery.error\n\n  if (error) {\n    return (\n      <Grid item key=\"1\" xs={12} md={6}>\n        <Alert message={error.message} type=\"warning\"></Alert>\n      </Grid>\n    );\n  }\n\n  return (\n    <>\n    <Hero></Hero>\n    <Container sx={{ pt: 6, pb: 6 }} maxWidth=\"lg\">\n      \n      <Grid container spacing={2} justifyContent=\"center\" alignItems=\"center\">\n        \n        <PoolFilter></PoolFilter>\n        <PoolList account={context.account} pools={poolQuery.data?.pools as Maybe<Pool[]>}></PoolList>\n      </Grid>\n    </Container>\n    </>\n  );\n}","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Slide } from '@mui/material';\nimport { TransitionProps } from '@mui/material/transitions';\nimport React, { useEffect, useState } from 'react';\nimport { getEmitter } from '../../../../util/emitter.util';\nimport { GlobalEvent } from '../../../../util/types';\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & { children?: React.ReactElement<any, any> },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport const ConfirmTransactionDialog: React.FC = () => {\n  const [open, setOpen] = useState(false);\n  const emitter = getEmitter();\n\n  useEffect(() => {\n    const handleEvent = (open: boolean) => {\n      setOpen(open)\n    }\n    emitter.on(GlobalEvent.ConfirmTransactionDialog, handleEvent)\n    return () => {\n      emitter.off(GlobalEvent.ConfirmTransactionDialog, handleEvent)\n    };\n  }, [emitter, setOpen])\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Dialog\n      open={open}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleClose}\n      style={{ zIndex: 9999 }}\n    >\n      <DialogTitle>ViteConnect</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Please confirm transaction on VITE Wallet App\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import { useQuery } from '@apollo/client';\nimport { useEffect } from 'react';\nimport { getNetworkManager } from '../../../../common/network';\nimport { GET_NETWORK_BLOCK_HEIGHT_QUERY } from '../../../../queries';\nimport { GetNetworkBlockHeight } from '../../../../queries/__generated__/GetNetworkBlockHeight';\nimport { getEmitter } from '../../../../util/emitter.util';\n\nexport const Network: React.FC = () => {\n  const networkManager = getNetworkManager();\n  const emitter = getEmitter();\n  const query = useQuery<GetNetworkBlockHeight>(GET_NETWORK_BLOCK_HEIGHT_QUERY, {\n    fetchPolicy: 'network-only'\n  });\n\n  useEffect(() => {\n    let interval = setInterval(async () => {\n      await query.refetch();\n      if (query.data?.networkBlockHeight) {\n        const height = query.data.networkBlockHeight;\n        emitter.emitNetworkBlockHeightChanged(height);\n        networkManager.networkHeight = height;\n      }\n    }, 1000)\n    return () => {\n      clearInterval(interval);\n    }\n  })\n\n  return (\n    <>\n    </>\n  )\n}\n","import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport Alert from '@mui/material/Alert';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nexport const WarningDialog: React.FC = () => {\n  const [open, setOpen] = React.useState(true);\n\n  const handleClick = () => {\n    setOpen(false);\n  }\n\n  const handleClose = (event:Object, reason:String) => {\n    if (reason !== 'backdropClick') {\n      setOpen(false);\n    }\n  };\n\n\n  \n  return (\n    <>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">\n          {\"Disclaimer\"}\n        </DialogTitle>\n        <DialogContent>\n          <Alert severity=\"info\">Welcome to Viva! Please read the following before using Viva.</Alert>\n          <br/>\n          <DialogContentText id=\"alert-dialog-description\">\n          Viva is an open source decentralized application operating on the Vite blockchain. As with all early-stage products there are risks associated with using the protocol and users assume the full responsibility for these risks. You should not deposit any money you are not comfortable losing.\n          <br/><br/>\n          THE VIVA PROTOCOL AND ACCESS TO THE PROTOCOL IS PROVIDED \"AS IS\", AT YOUR OWN RISK, AND WITHOUT WARRANTIES OF ANY KIND.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button href=\"https://vivafi.org\">Disagree</Button>\n          <Button onClick={handleClick} autoFocus>\n            Agree\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { SnackbarUtil } from '../../../../util/snackbar.util';\nimport { Footer } from '../../../layout/components/footer';\nimport { Header } from '../../../layout/components/header';\nimport { MainScroll } from '../../../layout/components/main-scroll';\nimport { MainWrapper } from '../../../layout/components/main-wrapper';\nimport { Pools } from '../../../pool/components/main';\nimport { ConfirmTransactionDialog } from '../dialog-transaction';\nimport { Network } from '../network';\nimport { WarningDialog } from '../dialog-warning';\n\nexport const Main: React.FC = (props: any) => {\n  SnackbarUtil.snackbar = useSnackbar();\n  return (\n    <MainWrapper>\n      <WarningDialog />\n      <Header />\n      <Network />\n      <MainScroll>\n        <Pools></Pools>\n        <ConfirmTransactionDialog></ConfirmTransactionDialog>\n      </MainScroll>\n      <Footer />\n    </MainWrapper>\n  )\n}\n","import { ApolloProvider } from '@apollo/client';\nimport { styled } from '@mui/material';\nimport BigNumber from 'bignumber.js';\nimport { SnackbarProvider } from 'notistack';\nimport React from 'react';\nimport BackgroundSVG from './bg2.svg';\nimport { getApolloClient } from './clients/apollo.client';\nimport { ConnectedWeb3 } from './contexts/connectedWeb3';\nimport { Web3Provider } from './contexts/web3';\nimport { Main } from './features/main/components/main';\n\nconst Background = styled('div')(`\n  width: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  background-image: url('${BackgroundSVG}');\n`\n);\n\nconst App: React.FC = () => {\n  const apolloClient = React.useMemo(() => getApolloClient(), [])\n  // Almost never return exponential notation\n  BigNumber.config({ EXPONENTIAL_AT: 1e+9 })\n  return (\n    <Background>\n      <SnackbarProvider maxSnack={3}>\n        <ApolloProvider client={apolloClient}>\n          <Web3Provider>\n            <ConnectedWeb3>\n              <Main />\n            </ConnectedWeb3>\n          </Web3Provider>\n        </ApolloProvider>\n      </SnackbarProvider>\n    </Background>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createTheme } from '@mui/material/styles';\nimport { red } from '@mui/material/colors';\n\n\n\n\n// A custom theme for this app\n// https://github.com/mui-org/material-ui/tree/master/examples/create-react-app-with-typescript\nconst theme = createTheme({\n\n  typography: {\n    fontFamily: ['Lato', 'Arial'].join(','),\n    h6: { fontFamily: ['Montserrat'].join(',') }\n  },\n  palette: {\n    primary: {\n      main: '#248C66',\n    },\n    secondary: {\n      main: '#4BD1A0',\n    },\n    error: {\n      main: red.A400,\n    },\n  },\n});\n\n\n\nexport default theme;","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { ThemeProvider } from '@mui/material/styles';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport theme from './theme';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n    <CssBaseline />\n    <App />\n  </ThemeProvider>,\n  document.querySelector('#root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export abstract class CommonUtil {\n  static isString(value: any): boolean {\n    return typeof value === 'string' || value instanceof String;\n  }\n\n  static isNullOrWhitespace(value?: Maybe<string>): boolean {\n    if (!CommonUtil.isString(value)) {\n      return true;\n    } else {\n      return value === null || value === undefined || value.trim() === '';\n    }\n  }\n\n  static isNullOrDefault(value?: string, defaultValue?: string): boolean {\n    return CommonUtil.isNullOrWhitespace(value) || value === defaultValue\n  }\n\n  static timeout(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  static truncateString = (str: Maybe<string>, maxLength: number) => {\n    if (str) {\n      if (maxLength < str.length) {\n        return `${str.substr(0, maxLength)}...`\n      }\n    }\n    return str\n  }\n\n  static truncateStringInTheMiddle = (str: Maybe<string>, strPositionStart: number, strPositionEnd: number) => {\n    if (str) {\n      const minTruncatedLength = strPositionStart + strPositionEnd\n      if (minTruncatedLength < str.length) {\n        return `${str.substr(0, strPositionStart)}...${str.substr(str.length - strPositionEnd, str.length)}`\n      }\n    }\n    return str\n  }\n\n  static toJsonString(data: any): string {\n    return JSON.stringify(data, null, 2);\n  }\n\n  static async imageUrlToBlob(url: string): Promise<Blob> {\n    return (await fetch(url)).blob();\n  }\n\n  static random(min: number, max: number) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  }\n\n  static equals(lh: any, rh: any): boolean {\n    // The ORDER of the properties IS IMPORTANT\n    return JSON.stringify(lh) === JSON.stringify(rh);\n  }\n}","import BigNumber from 'bignumber.js';\nimport EventEmitter from 'events';\nimport { GlobalEvent, Pool, PoolFilterValues } from './types';\n\nexport interface IGlobalEmitter {\n  emitConfirmTransactionDialog(open: boolean): void\n  emitConnectWalletDialog(open: boolean): void\n  emitNetworkBlockHeightChanged(height: BigNumber): void\n  emitPoolFilterValuesChanged(oldValues: PoolFilterValues, newValues: PoolFilterValues): void\n  emitPoolDeposit(id: number, amount: BigNumber, account: string): void\n  emitPoolWithdraw(id: number, amount: BigNumber, account: string): void\n  emitPoolUpdate(pool: Pool): void\n  on(event: string | symbol, listener: (...args: any[]) => void): this\n  off(event: string | symbol, listener: (...args: any[]) => void): this\n}\n\nexport class GlobalEmitter extends EventEmitter implements IGlobalEmitter {\n  emitConfirmTransactionDialog(open: boolean): void {\n    this.emit(GlobalEvent.ConfirmTransactionDialog, open)\n  }\n  emitConnectWalletDialog(open: boolean): void {\n    this.emit(GlobalEvent.ConnectWalletDialog, open)\n  }\n  emitNetworkBlockHeightChanged(height: BigNumber): void {\n    this.emit(GlobalEvent.NetworkBlockHeightChanged, height)\n  }\n  emitPoolFilterValuesChanged(oldValues: PoolFilterValues, newValues: PoolFilterValues): void {\n    this.emit(GlobalEvent.PoolFilterValuesChanged, oldValues, newValues)\n  }\n  emitPoolDeposit(id: number, amount: BigNumber, account: string): void {\n    this.emit(GlobalEvent.PoolDeposit, id, amount, account)\n  }\n  emitPoolWithdraw(id: number, amount: BigNumber, account: string): void {\n    this.emit(GlobalEvent.PoolWithdraw, id, amount, account)\n  }\n  emitPoolUpdate(pool: Pool): void {\n    this.emit(GlobalEvent.PoolUpdate, pool)\n  }\n}\n\nconst emitter = new GlobalEmitter();\n\nexport const getEmitter = (): IGlobalEmitter => {\n  return emitter;\n}\n","export enum WalletType {\n  Web = 'Web',\n  Session = 'Session'\n}\n\nexport abstract class Wallet<T> {\n  private readonly _type: WalletType\n\n  active?: T\n  accounts: T[] = []\n\n  constructor(type: WalletType, init?: Partial<Wallet<T>>) {\n    this._type = type\n    this.baseInitinit(init)\n  }\n\n  static fromJS(data: any): Maybe<WebWallet | SessionWallet> {\n    data = typeof data === 'object' ? data : {}\n    switch (data._type) {\n      case WalletType.Web:\n        return new WebWallet(data)\n      case WalletType.Session:\n        return new SessionWallet(data)\n      default:\n        break\n    }\n    return undefined\n  }\n\n  get type(): WalletType {\n    return this._type\n  }\n\n  protected abstract createAccount(data: any): T\n\n  private baseInitinit(data?: any): void {\n    if (data) {\n      this.active = data.active ? this.createAccount(data.active) : undefined\n      if (data.accounts && Array.isArray(data.accounts)) {\n        data.accounts.forEach((account: any) => {\n          this.accounts.push(this.createAccount(account))\n        })\n      }\n    }\n    if (!this.accounts) {\n      this.accounts = []\n    }\n  }\n}\n\nexport class WebWallet extends Wallet<WebWalletAccount> {\n  mnemonic!: string\n\n  constructor(init?: Partial<WebWallet>) {\n    super(WalletType.Web, init)\n    this.init(init)\n  }\n\n  init(data?: any): void {\n    if (data) {\n      this.mnemonic = data.mnemonic\n    }\n  }\n\n  protected createAccount(data: any): WebWalletAccount {\n    return new WebWalletAccount(data)\n  }\n}\n\nexport class SessionWallet extends Wallet<SessionWalletAccount> {\n  session!: string\n  timestamp!: number\n\n  constructor(init?: Partial<SessionWallet>) {\n    super(WalletType.Session, init)\n    this.init(init)\n  }\n\n  init(data?: any): void {\n    if (data) {\n      this.session = data.session\n      this.timestamp = data.timestamp\n    }\n  }\n\n  protected createAccount(data: any): SessionWalletAccount {\n    return new SessionWalletAccount(data)\n  }\n}\n\nexport enum WalletAccountType {\n  Web = 'Web',\n  Session = 'Session'\n}\n\nexport abstract class WalletAccount {\n  private readonly _type: WalletAccountType\n\n  id!: string\n  address!: string\n\n  constructor(type: WalletAccountType, init?: Partial<WalletAccount>) {\n    this._type = type\n    this.baseInit(init)\n  }\n\n  static fromJS(data: any): Maybe<WalletAccount> {\n    data = typeof data === 'object' ? data : {}\n    switch (data._type) {\n      case WalletType.Web:\n        return new WebWalletAccount(data)\n      case WalletType.Session:\n        return new SessionWalletAccount(data)\n      default:\n        break\n    }\n    return undefined\n  }\n\n  get type(): WalletAccountType {\n    return this._type\n  }\n\n  private baseInit(data?: any): void {\n    if (data) {\n      this.id = data.id\n      this.address = data.address\n    }\n  }\n}\n\nexport class WebWalletAccount extends WalletAccount {\n  privateKey!: string\n\n  constructor(init?: Partial<WebWalletAccount>) {\n    super(WalletAccountType.Web, init)\n    this.init(init)\n  }\n\n  init(data?: any): void {\n    if (data) {\n      this.privateKey = data.privateKey\n    }\n  }\n}\n\nexport class SessionWalletAccount extends WalletAccount {\n  constructor(init?: Partial<SessionWalletAccount>) {\n    super(WalletAccountType.Session, init)\n  }\n}","import Connector from '@vite/connector';\nimport { WalletManager } from '.';\nimport { getLogger } from '../util/logger';\nimport { SessionWallet, SessionWalletAccount } from './types';\n\nconst logger = getLogger()\n\nexport interface IWalletConnector {\n  readonly uri: string\n  sendTransactionAsync(...args: any): Promise<any>\n  signMessageAsync(...args: any): Promise<any>\n  killSessionAsync(): Promise<void>\n  on(event: string | symbol, listener: (...args: any[]) => void): this\n  off(event: string | symbol, listener: (...args: any[]) => void): this\n}\n\nexport class WalletConnector extends Connector implements IWalletConnector {\n  private readonly _walletManager: WalletManager;\n\n  constructor(walletManager: WalletManager, opts: any, meta?: any) {\n    super(opts, meta);\n    this._walletManager = walletManager;\n    this.on('connect', (err: any, payload: any) => {\n      logger.info('WalletConnector.connect', err, payload)()\n      const { accounts } = payload.params[0];\n      this.saveSession(accounts);\n    });\n    this.on('disconnect', (err: any, payload: any) => {\n      logger.info('WalletConnector.disconnect', err, payload)()\n      this.stopBizHeartBeat()\n      this._walletManager.removeWallet()\n    });\n    this.on('session_update', (err: any, payload: any) => {\n      logger.info('WalletConnector.session_update', err, payload)()\n      const session = payload[0];\n      if (session && session.accounts) {\n        this.saveSession(session.accounts);\n      }\n    });\n  }\n\n  get uri(): string {\n    return super.uri\n  }\n\n  on(event: string | symbol, listener: (...args: any[]) => void): this {\n    return super.on(event, listener)\n  }\n\n  off(event: string | symbol, listener: (...args: any[]) => void): this {\n    return super.off(event, listener)\n  }\n\n  saveSession(accounts: string[]): void {\n    if (!accounts || !accounts[0]) {\n      throw new Error('address is null');\n    }\n    const sessionAccounts: SessionWalletAccount[] = []\n    for (let index = 0; index < accounts.length; index++) {\n      const address = accounts[index];\n      sessionAccounts.push(new SessionWalletAccount({\n        id: index.toString(),\n        address: address\n      }))\n    }\n    const wallet = new SessionWallet({\n      active: sessionAccounts[0],\n      accounts: sessionAccounts,\n      session: this.session,\n      timestamp: new Date().getTime()\n    })\n    this._walletManager.setWallet(wallet)\n  }\n\n  updateSession(): void {\n    const existing = this._walletManager.getWallet()\n    if (existing && existing instanceof SessionWallet) {\n      existing.timestamp = new Date().getTime()\n      this._walletManager.updateWalletStore(existing)\n    }\n  }\n\n  async createSession(): Promise<string> {\n    await super.createSession();\n    return this.uri;\n  }\n\n  async sendTransactionAsync(...args: any): Promise<any> {\n    return new Promise((res, rej) => {\n      this.on('disconnect', () => {\n        rej(\"Request aborted due to disconnect.\");\n      });\n\n      this.sendCustomRequest({ method: 'vite_signAndSendTx', params: args }).then((r: any) => {\n        this.updateSession();\n        res(r);\n      }).catch((e: any) => {\n        rej(e);\n      });\n    });\n  }\n\n  async signMessageAsync(...args: any): Promise<any> {\n    return new Promise((res, rej) => {\n      this.on('disconnect', () => {\n        rej(\"Request aborted due to disconnect.\");\n      });\n\n      this.sendCustomRequest({ method: 'vite_signMessage', params: args }).then((r: any) => {\n        this.updateSession();\n        res(r);\n      }).catch((e: any) => {\n        rej(e);\n      });\n    });\n  }\n\n  async killSessionAsync(): Promise<any> {\n    await super.killSession();\n  }\n}","import { IWalletConnector, WalletConnector, WalletManager } from '.';\nimport { getLogger } from '../util/logger';\nimport { Network } from '../util/types';\n\nconst logger = getLogger()\n\nexport class WalletConnectorFactory {\n  private readonly _walletManager: WalletManager\n\n  constructor(walletManager: WalletManager) {\n    this._walletManager = walletManager\n  }\n\n  create(network: Network): IWalletConnector {\n    const session = this._walletManager.getValidSession()\n    const account = this._walletManager.getActiveAccount()\n    const opts = {\n      bridge: network.connectorUrl,\n      session\n    }\n    const meta = account ? { lastAccount: account.address } : undefined\n    const connector = new WalletConnector(this._walletManager, opts, meta)\n\n    if (!session) {\n      connector.createSession().then(() => logger.info('IWalletConnector connected', connector.uri)())\n    }\n\n    return connector\n  }\n}","import { SessionWallet, Wallet, WebWallet } from '.';\nimport { CommonConstants } from '../common/constants';\nimport { getLogger } from '../util/logger';\nimport { WalletType } from './types';\n\nconst logger = getLogger()\n\nexport class WalletStore {\n\n  private readonly _webWalletKey = CommonConstants.WEB_WALLET_STORAGE_SPACE;\n  private readonly _sessionWalletKey = CommonConstants.SESSION_WALLET_STORAGE_SPACE\n\n  clear(): void {\n    localStorage.removeItem(this._webWalletKey);\n    sessionStorage.removeItem(this._sessionWalletKey);\n  }\n\n  getItem(): Maybe<WebWallet | SessionWallet> {\n    let data;\n\n    try {\n      data = localStorage.getItem(this._webWalletKey);\n      if (!data) {\n        data = sessionStorage.getItem(this._sessionWalletKey);\n      }\n    } catch (err) {\n      logger.error(err)();\n      return undefined;\n    }\n\n    if (!data) {\n      return undefined;\n    }\n\n    try {\n      return Wallet.fromJS(JSON.parse(data));\n    } catch (err) {\n      logger.error(err)();\n      return undefined;\n    }\n  }\n\n  setItem(data: WebWallet | SessionWallet): void {\n    const saveData = JSON.stringify(data);\n\n    try {\n      switch (data.type) {\n        case WalletType.Web:\n          localStorage.setItem(this._webWalletKey, saveData);\n          break;\n        case WalletType.Session:\n          sessionStorage.setItem(this._sessionWalletKey, saveData);\n          break;\n        default:\n          throw new Error(`Wallet type '${data.type}' is not supported.`)\n      }\n    } catch (err) {\n      logger.error(err)();\n    }\n  }\n}","import { wallet } from '@vite/vitejs';\nimport { SessionWallet, WalletAccount, WebWallet, WebWalletAccount } from '.';\nimport { getLogger } from '../util/logger';\nimport { WalletStore } from './store';\n\nconst logger = getLogger()\n\nexport class WalletManager {\n  private readonly _store: WalletStore;\n  private _wallet?: WebWallet | SessionWallet;\n  private _mnemonicDeriveIndex = 0;\n  private _setWalletCallback?: (wallet?: WebWallet | SessionWallet | undefined) => void;\n\n  constructor() {\n    this._store = new WalletStore();\n  }\n\n  initWallet(): void {\n    const wallet = this._store.getItem();\n    if (wallet) {\n      this._wallet = wallet;\n      this._mnemonicDeriveIndex = wallet.accounts.length;\n      this.updateWallet();\n    }\n  }\n\n  set onSetWalletCallback(cb: (wallet?: WebWallet | SessionWallet | undefined) => void) {\n    this._setWalletCallback = cb;\n  }\n\n  getWallet(): Maybe<WebWallet | SessionWallet> {\n    return this._wallet;\n  }\n\n  setWallet(wallet?: WebWallet | SessionWallet): void {\n    this._wallet = wallet;\n    this.updateWalletStore(wallet)\n    this.updateWallet()\n  }\n\n  updateWallet(): void {\n    if (this._setWalletCallback) {\n      this._setWalletCallback(this._wallet);\n    }\n  }\n\n  updateWalletStore(wallet?: WebWallet | SessionWallet): void {\n    if (wallet) {\n      this._store.setItem(wallet);\n    }\n  }\n\n  createWebWallet(mnemonic: string): Maybe<WebWallet> {\n    if (!this.validateMnemonic(mnemonic)) {\n      return undefined;\n    }\n    this.resetWallet();\n    const account = this.createWebWalletAccount(mnemonic, 0);\n    const wallet = new WebWallet({\n      active: account,\n      mnemonic,\n      accounts: [\n        account\n      ]\n    });\n    this.setWallet(wallet);\n    return wallet;\n  }\n\n  removeWallet(): void {\n    this.resetWallet();\n    this.updateWallet();\n  }\n\n  getAccountByAddress(address: string): Maybe<WalletAccount> {\n    return this._wallet?.accounts?.find(e => e.address === address)\n  }\n\n  addAccount(): Maybe<WalletAccount> {\n    if (this._wallet instanceof WebWallet) {\n      const account = this.createWebWalletAccount(this._wallet.mnemonic);\n      this._wallet.accounts.push(account);\n      this.setActiveAccount(account);\n      return account;\n    }\n    return undefined\n  }\n\n  getActiveAccount(): Maybe<WalletAccount> {\n    return this._wallet?.active\n  }\n\n  setActiveAccount(account: WalletAccount): boolean {\n    if (this._wallet) {\n      this._wallet.active = account;\n      this._store.setItem(this._wallet);\n      this.updateWallet();\n      return true;\n    }\n    return false;\n  }\n\n  getAccounts(): WalletAccount[] {\n    if (this._wallet) {\n      return this._wallet.accounts;\n    }\n    return [];\n  }\n\n  getValidSession(): Maybe<string> {\n    const wallet = this._store.getItem();\n    if (wallet && wallet instanceof SessionWallet) {\n      if (new Date().getTime() - wallet.timestamp < 1000 * 60 * 10) {\n        return wallet.session;\n      } else {\n        logger.info('Found expired session.', wallet)();\n      }\n    }\n    return undefined;\n  }\n\n  private resetWallet(): void {\n    this._wallet = undefined;\n    this._mnemonicDeriveIndex = 0;\n    this._store.clear();\n  }\n\n  private createWebWalletAccount(mnemonic: string, index = this._mnemonicDeriveIndex): WebWalletAccount {\n    const { privateKey } = wallet.deriveAddress({\n      mnemonics: mnemonic,\n      index\n    });\n    let account = new WebWalletAccount({\n      id: index.toString(),\n      privateKey,\n      address: wallet.createAddressByPrivateKey(privateKey).address\n    });\n    this._mnemonicDeriveIndex = index + 1;\n    return account;\n  }\n\n  private validateMnemonic(mnemonic: Maybe<string>): Boolean {\n    if (mnemonic) {\n      return wallet.validateMnemonics(mnemonic);\n    }\n    return false;\n  }\n}\n\nconst manager = new WalletManager();\n\nexport const getWalletManager = () => {\n  return manager;\n}"],"sourceRoot":""}